!function(){"use strict";var e={771:function(e,t,n){e.exports=n.p+"3b5bf5d8808b2f69dc93.png"},84:function(e,t,n){e.exports=n.p+"be477f46c50757f14802.png"},617:function(e,t,n){e.exports=n.p+"06170a03ad0b87abc0cc.png"},774:function(e,t,n){e.exports=n.p+"2e68ff2310a781480a3b.png"},689:function(e,t,n){e.exports=n.p+"4c7210e42f7571d8ad5b.png"},475:function(e,t,n){e.exports=n.p+"1c7f1e69704a62f4c8d8.png"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.p="",function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}var r,o;return r=n,(o=[{key:"_showInputError",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._inputErrorClass)}},{key:"_hideInputError",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._inputErrorClass)}},{key:"toggleButton",value:function(){this._hasValidInput()?(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass)):(this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass))}},{key:"_hasValidInput",value:function(){return this._inputList.every((function(e){return!0===e.validity.valid}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_setEventListeners",value:function(){var t,n=this;this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputList=function(t){if(Array.isArray(t))return e(t)}(t=this._form.querySelectorAll(this._inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){n._checkInputValidity(e),n.toggleButton()}))}))}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){return e.preventDefault()})),this._setEventListeners()}}])&&t(r.prototype,o),n}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.data,o=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=r.name,this._link=r.link,this._handleCardClick=o,this._cardSelector=n}var t,n;return t=e,(n=[{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".card__image").addEventListener("click",(function(){return e._handleCardClick({link:e._link,name:e._name})})),this._element.querySelector(".card__like").addEventListener("click",(function(t){return e._handleLikeIcon(t)})),this._element.querySelector(".card__delete").addEventListener("click",(function(){return e._handleDeleteCard()}))}},{key:"_handleLikeIcon",value:function(e){e.target.classList.toggle("card__like_active")}},{key:"_handleDeleteCard",value:function(){this._element.remove(),this._element=null}},{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".card__image").style.backgroundImage="url(".concat(this._link,")"),this._element.querySelector(".card__title").textContent=this._name,this._element}}])&&o(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&a(t.prototype,n),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(".".concat(t)),this._handleEscUp=this._handleEscUp.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscUp",value:function(e){"Escape"==e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){(t.target.classList.contains("popup")||t.target.classList.contains("close-button"))&&e.close()}))}},{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscUp)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscUp)}}])&&c(t.prototype,n),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=m(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._cardImage=t._popupElement.querySelector(".popup__preview-image"),t}return t=a,(n=[{key:"open",value:function(e){this._popupElement.querySelector(".popup__caption").textContent=e.name,this._cardImage.src=e.link,this._cardImage.alt="Preview of ".concat(e.name),f(y(a.prototype),"open",this).call(this)}}])&&p(t.prototype,n),a}(l);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=E(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function k(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return k(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._popupForm=t._popupElement.querySelector(".popup__form"),t._handleFormSubmit=r,t._inputs=t._popupElement.querySelectorAll(".popup__input"),t._values={},t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputs.forEach((function(t){e._values[t.name]=t.value})),this._values}},{key:"setEventListeners",value:function(){var e=this;g(w(a.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}},{key:"close",value:function(){this._popupForm.reset(),g(w(a.prototype),"close",this).call(this)}}])&&b(t.prototype,n),a}(l);function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(t){var n=t.nameSelector,r=t.jobSelector,o=t.imageSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(".".concat(n)),this._jobElement=document.querySelector(".".concat(r)),this._imageElement=document.querySelector(".".concat(o))}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,job:this._jobElement.textContent,image:this._imageElement.src}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.aboutMe,r=e.link;this._nameElement.textContent=t,this._jobElement.textContent=n,this._imageElement.src=r}}])&&I(t.prototype,n),e}(),j=[{name:"Palouse Falls",link:n(475)},{name:"Ghost town of Bodie",link:n(689)},{name:"Car Forest",link:n(84)},{name:"Byodo-In Temple",link:n(771)},{name:"Fort Jefferson",link:n(617)},{name:"Garden of the Gods",link:n(774)}],L={editFormElement:document.querySelector(".popup_type_edit").querySelector(".popup__form"),addFormElement:document.querySelector(".popup_type_add").querySelector(".popup__form"),editImageProfileFormElement:document.querySelector(".popup_type_profile-image").querySelector(".popup__form"),profileNameElement:document.querySelector(".profile__name"),profileJobElement:document.querySelector(".profile__about-me"),profileImageElement:document.querySelector(".profile__image"),profileImagePopupElement:document.querySelector(".popup__input_image_link"),profileNamePopupElement:document.querySelector(".popup__input_field_name"),profileJobPopupElement:document.querySelector(".popup__input_field_about-me")},O={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"submit-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var B=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}var t,n;return t=e,(n=[{key:"getProfileInfo",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers}).then((function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"saveProfileInfo",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:t,about:n})}).then((function(e){return e.ok&&console.log("Data saved correctly."),Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"saveProfileImage",value:function(e){var t=e.avatar;return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:t})}).then((function(e){return e.ok&&console.log("Image saved correctly."),Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}}])&&q(t.prototype,n),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"d32f6df6-a478-44c7-98e2-39f20efb7fb4","Content-Type":"application/json"}}),x=new u({items:j,renderer:function(e){M(e)}},".cards-grid"),F=new _("popup_type_preview"),T=new P({nameSelector:"profile__name",jobSelector:"profile__about-me",imageSelector:"profile__image"}),R=new C({popupSelector:"popup_type_edit",handleFormSubmit:function(e){B.saveProfileInfo({name:e.name,about:e.aboutMe}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),G()}}),U=new C({popupSelector:"popup_type_add",handleFormSubmit:function(e){var t={name:e.title,link:e.link};M(t)}}),A=new C({popupSelector:"popup_type_profile-image",handleFormSubmit:function(e){B.saveProfileImage({avatar:e.link}).then((function(e){console.log(e)})).catch((function(e){console.log(e)})),L.profileImageElement.src=e.link}}),D=new C({popupSelector:"popup_type_delete-card",handleFormSubmit:function(){handleDeleteCard()}}),V=new r(O,L.editFormElement),J=new r(O,L.addFormElement),N=new r(O,L.editImageProfileFormElement),M=function(e){var t=new i({data:e,handleCardClick:function(e){F.open(e)}},"#card-template");return x.addItem(t.generateCard()),t};V.enableValidation(),J.enableValidation(),N.enableValidation(),x.renderItems(),F.setEventListeners(),R.setEventListeners(),U.setEventListeners(),A.setEventListeners(),D.setEventListeners(),document.querySelector(".edit-button").addEventListener("click",(function(){var e=T.getUserInfo(),t=e.name,n=e.job;L.profileNamePopupElement.value=t,L.profileJobPopupElement.value=n,R.open()})),document.querySelector(".add-button").addEventListener("click",(function(){U.open(),J.toggleButton()})),document.querySelector(".profile__image-wrapper").addEventListener("click",(function(){var e=T.getUserInfo().image;L.profileImagePopupElement.value=e,A.open(),N.toggleButton()}));var G=function(){B.getProfileInfo().then((function(e){var t=e.name,n=e.about,r=e.avatar;T.setUserInfo({name:t,aboutMe:n,link:r})})).catch((function(e){console.log(e)}))};G()}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QzFDZ0QsRUFBc0JTLE9BQ3RCSCxFQUE4QnhILGtCQXVCaEMsSUFBTThHLEVBQW9CLFdBQ3hCOUIsRUFBSWtELGlCQUFpQjVDLE1BQUssU0FBQ2hGLEdBQ3pCLElBQVFHLEVBQXdCSCxFQUF4QkcsS0FBTXdGLEVBQWtCM0YsRUFBbEIyRixNQUFPSyxFQUFXaEcsRUFBWGdHLE9BQ3JCSyxFQUFTd0IsWUFBWSxDQUFFMUgsS0FBQUEsRUFBTTBELFFBQVM4QixFQUFPdEYsS0FBTTJGLE9BQ2xEVCxPQUFNLFNBQUNDLEdBQ1JDLFFBQVFDLElBQUlGLE9BSWhCZ0IsSSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiLyoqXHJcbiAqIFZhbGlkYXRpb24gZm9yIGFsbCB0aGUgcG9wdXBzLlxyXG4gKiBAcGFyYW0gIHt9IHNldHRpbmdzIC0gdmFsaWRhdGlvblNldHRpbmdzIG9iamVjdCBmb3IgdGhlIGlucHV0cyB2YWxpZGF0aW9uLlxyXG4gKiBAcGFyYW0gIHt9IGZvcm1FbGVtZW50IC0gYWRkRm9ybSBvciBlZGl0Rm9ybSBwb3B1cC5cclxuICovXHJcbmNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3JcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3JcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzXHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3NcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzXHJcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnRcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFByaXZhdGUgbWV0aG9kIHRvIHNob3cgYW4gZXJyb3JcclxuICAgKiBAcGFyYW0gIHt9IGlucHV0IC0gSW5wdXQgcGFzc2VkIHRocm91Z2ggdGhlIGZvcm1zLlxyXG4gICAqL1xyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKVxyXG4gICAgLy8gQWRkIGVycm9yIG1lc3NhZ2UgYW5kIGNsYXNzXHJcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcylcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlXHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpXHJcbiAgfTtcclxuXHJcbiAgLyoqXHJcbiAgICogUHJpdmF0ZSBtZXRob2QgdG8gaGlkZSBhbiBlcnJvci5cclxuICAgKiBAcGFyYW0gIHt9IGlucHV0IC0gSW5wdXQgcGFzc2VkIHRocm91Z2ggdGhlIGZvcm1zLlxyXG4gICAqL1xyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKVxyXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpXHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcylcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFB1YmxpYyBtZXRob2QgdGhhdCB0b2dnbGUgdGhlIHN1Ym1pdCBidXR0b24uXHJcbiAgICovXHJcbiAgdG9nZ2xlQnV0dG9uKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc1ZhbGlkSW5wdXQoKSkge1xyXG4gICAgICAvLyBNYWtlIHRoZSBidXR0b24gZW5hYmxlZFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZVxyXG4gICAgICAvLyBSZW1vdmUgdGhlIGRpc2FibGVkIGNsYXNzIGZvciB0aGUgYnV0dG9uXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAvLyBNYWtlIHRoZSBidXR0b24gZGlzYWJsZWRcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZVxyXG4gICAgICAvLyBBZGQgdGhlIGRpc2FibGVkIGNsYXNzIGZvciB0aGUgYnV0dG9uXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDaGVjayBpZiB0aGUgaW5wdXRzIGFyZSB2YWxpZC5cclxuICAgKi9cclxuICBfaGFzVmFsaWRJbnB1dCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3QuZXZlcnkoKGlucHV0KSA9PiBpbnB1dC52YWxpZGl0eS52YWxpZCA9PT0gdHJ1ZSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIElmIHRoZSBjb25kaXRpb24gaXMgdHJ1ZSwgaGlkZSB0aGUgZXJyb3IsIGlmIGl0IGlzIGZhbHNlLCBzaG93IHRoZSBlcnJvci5cclxuICAgKiBAcGFyYW0gIHt9IGlucHV0IC0gSW5wdXQgcGFzc2VkIHRocm91Z2ggdGhlIGZvcm1zLlxyXG4gICAqL1xyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcclxuICAgIGlmIChpbnB1dC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0KVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogSGFuZGxlIHRoZSBldmVudCBsaXN0ZW5lcnMgZm9yIHRoZSBpbnB1dHMuXHJcbiAgICovXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKVxyXG4gICAgLy8gR3JhYiBlYWNoIG9uZSBvZiB0aGUgaW5wdXRzXHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXVxyXG4gICAgLy8gVG9nZ2xlIHRoZSBidXR0b24gYmVmb3JlIHdlIHN0YXJ0IGxpc3RlbmluZyB0byB0aGUgaW5wdXQgZXZlbiwgb3RoZXJ3aXNlIHRoZSBidXR0b24gd2lsbCBiZSBhY3RpdmUgd2hlbiB3ZSBsb2FkIHRoZSBwYWdlIGV2ZW4gaWYgdGhlIGlucHV0IGZpZWxkcyBhcmUgaW52YWxpZFxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xyXG4gICAgICAgIC8vIENoZWNrIHZhbGlkaXR5IG9mIHRoZSBpbnB1dFxyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dClcclxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbigpXHJcbiAgICAgIH0pXHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRW5hYmxlIHRoZSB2YWxpZGF0aW9uIGZvciB0aGUgZm9ybXMuXHJcbiAgICovXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4gZXZ0LnByZXZlbnREZWZhdWx0KCkpICAvLyBQcmV2ZW50IHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIHRoZSBmb3JtIHdoZW4gd2UgYXJlIHN1Ym1pdHRpbmcgc29tZXRoaW5nLCB0aGVuIHdlIGNhbiBsb29wIG91ciBpbnB1dCBlbGVtZW50c1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKSAgLy8gSW1wbGVtZW50YXRpb24gb2YgdGhlIGxpc3RlbmVyXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xyXG4iLCIvKipcclxuICogSGFuZGxlIHRoZSBjcmVhdGlvbiBvZiB0aGUgY2FyZCBlbGVtZW50LlxyXG4gKiBAcGFyYW0gIHt9IGRhdGEgLSBDYXJkIG5hbWUgYW5kIGNhcmQgbGluay5cclxuICogQHBhcmFtICB7fSBjYXJkU2VsZWN0b3IgLSBDYXJkIGlkIHRlbXBsYXRlLlxyXG4gKi9cclxuY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBkYXRhLCBoYW5kbGVDYXJkQ2xpY2sgfSwgY2FyZFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lXHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rXHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3IgIC8vIFRlbXBsYXRlIG9mIG91ciBjYXJkXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBFdmVudCBsaXN0ZW5lcnMgaGFuZGxlci5cclxuICAgKi9cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlQ2FyZENsaWNrKHsgbGluazogdGhpcy5fbGluaywgbmFtZTogdGhpcy5fbmFtZSB9KSlcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHRoaXMuX2hhbmRsZUxpa2VJY29uKGV2dCkpXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19kZWxldGUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQoKSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhhbmRsZSB0aGUgbGlrZSBidXR0b24uXHJcbiAgICogQHBhcmFtICB7fSBldnRcclxuICAgKi9cclxuICBfaGFuZGxlTGlrZUljb24oZXZ0KSB7XHJcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2xpa2VfYWN0aXZlJylcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhhbmRsZSB0aGUgZGVsZXRlIGJ1dHRvbi5cclxuICAgKi9cclxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKClcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBDbG9uZSB0aGUgY2FyZCB0ZW1wbGF0ZS5cclxuICAgKi9cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLmNhcmQnKS5jbG9uZU5vZGUodHJ1ZSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhhbmRsZSB0aGUgY2FyZCBnZW5lcmF0aW9uLlxyXG4gICAqL1xyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt0aGlzLl9saW5rfSlgXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZVxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnRcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IENhcmQ7XHJcbiIsImNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIHNlbGVjdG9yKSB7XHJcblxyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGl0ZW1zO1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuXHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5fcmVuZGVyZWRJdGVtcy5mb3JFYWNoKGl0ZW0gPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFNlY3Rpb247XHJcbiIsImNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtwb3B1cFNlbGVjdG9yfWApO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjVXAgPSB0aGlzLl9oYW5kbGVFc2NVcC5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY1VwKGV2dCkge1xyXG4gICAgLy8gUHJldmVudCBkZWZhdWx0IGFuZCBpZiBldmVudCB3YXMgb24gRVNDIGJ1dHRvbiAtPiBjYWxsIFwiY2xvc2VcIiBtZXRob2RcclxuICAgIGlmIChldnQua2V5ID09ICdFc2NhcGUnKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICAvLyBDcmVhdGUgYW4gZXZlbnQgbGlzdGVuZXIgZm9yIGNsaWNrIG9uIHRoZSBDTE9TRSBidXR0b24gb3IgcHVwdXAgaGFsZi10cmFzcGFyZW50IGJhY2tncm91bmRcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcclxuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cCcpIHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjbG9zZS1idXR0b24nKSkge1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICAvLyBhZGRzIGEgbmV3IGNsYXNzIGFuZCBhbiBldmVudCBsaXN0ZW5lciwgdG8gbGlzdGVuIHRoZSBFU0MgYnV0dG9uXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjVXApO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICAvLyByZW1vdmVzIGEgbmV3IGNsYXNzIHdlIGFkZGVkIGFuZCByZW1vdmVzIGFuIGV2ZW50IGxpc3RlbmVyIGZvciB0aGUgRVNDIGJ1dHRvblxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY1VwKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3ByZXZpZXctaW1hZ2UnKTtcclxuICB9XHJcblxyXG4gIG9wZW4oZGF0YSkge1xyXG4gICAgLy8gcHV0cyAnbmFtZScgZnJvbSBhcmdzIHRvIHRoZSAnLnBvcHVwX19jYXB0aW9uJyBzZWxlY3RvclxyXG4gICAgLy8gZmluZCBpbWFnZSBieSB0aGUgJ3BvcHVwX19pbWFnZScgc2VsZWN0b3IsIHNldCAnc3JjJyBhbmQgJ2FsdCcgZm9yIGl0XHJcbiAgICAvLyBjYWxsIHN1cGVyLm9wZW4oKSwgaXQgd2lsbCBjYWxsIHRoZSBvcmdpbmFsIG1ldGhvZCBmcm9tIHRoZSBvcmlnaW5hbCBQb3B1cCBjbGFzc1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2FwdGlvbicpLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSBgUHJldmlldyBvZiAke2RhdGEubmFtZX1gO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0IH0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XHJcbiAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xyXG4gICAgdGhpcy5fdmFsdWVzID0ge307XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dHMuZm9yRWFjaChpbnB1dCA9PiB7XHJcbiAgICAgIHRoaXMuX3ZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLl92YWx1ZXM7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEZvcm07XHJcbiIsImNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IsIGltYWdlU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtuYW1lU2VsZWN0b3J9YCk7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7am9iU2VsZWN0b3J9YCk7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbWFnZVNlbGVjdG9yfWApO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAvLyBSZXR1cm5zIGFuIG9iamVjdCB3aXRoIGluZm9ybWF0aW9uIGFib3V0IHRoZSB1c2VyLlxyXG4gICAgLy8gVGhpcyBtZXRob2Qgd2lsbCBiZSBoYW5keSBmb3IgY2FzZXMgd2hlbiBpdCdzIG5lY2Vzc2FyeSB0byBkaXNwbGF5IHRoZSB1c2VyXHJcbiAgICAvLyBkYXRhIGluIHRoZSBvcGVuIGZvcm0uXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgam9iOiB0aGlzLl9qb2JFbGVtZW50LnRleHRDb250ZW50LFxyXG4gICAgICBpbWFnZTogdGhpcy5faW1hZ2VFbGVtZW50LnNyY1xyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXRNZSwgbGluayB9KSB7XHJcbiAgICAvLyBUYWtlcyBuZXcgdXNlciBkYXRhIGFuZCBhZGRzIGl0IG9uIHRoZSBwYWdlLlxyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGFib3V0TWU7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc3JjID0gbGluaztcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xyXG4iLCJpbXBvcnQgcGFsb3VzZUZhbGxzIGZyb20gXCIuLi9pbWFnZXMvcGFsb3VzZS1mYWxscy5wbmdcIjtcclxuaW1wb3J0IGdob3N0VG93biBmcm9tIFwiLi4vaW1hZ2VzL2dob3N0LXRvd24tb2YtYm9kaWUucG5nXCI7XHJcbmltcG9ydCBjYXJGb3Jlc3QgZnJvbSBcIi4uL2ltYWdlcy9jYXItZm9yZXN0LnBuZ1wiO1xyXG5pbXBvcnQgYnlvZG9UZW1wbGUgZnJvbSBcIi4uL2ltYWdlcy9ieW9kby1pbi10ZW1wbGUucG5nXCI7XHJcbmltcG9ydCBmb3J0SmVmZmVyc29uIGZyb20gXCIuLi9pbWFnZXMvZm9ydC1qZWZmZXJzb24ucG5nXCI7XHJcbmltcG9ydCBnYXJkZXJHb2RzIGZyb20gXCIuLi9pbWFnZXMvZ2FyZGVuLW9mLXRoZS1nb2RzLnBuZ1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIlBhbG91c2UgRmFsbHNcIixcclxuICAgIGxpbms6IHBhbG91c2VGYWxsc1xyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJHaG9zdCB0b3duIG9mIEJvZGllXCIsXHJcbiAgICBsaW5rOiBnaG9zdFRvd25cclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiQ2FyIEZvcmVzdFwiLFxyXG4gICAgbGluazogY2FyRm9yZXN0XHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJ5b2RvLUluIFRlbXBsZVwiLFxyXG4gICAgbGluazogYnlvZG9UZW1wbGVcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiRm9ydCBKZWZmZXJzb25cIixcclxuICAgIGxpbms6IGZvcnRKZWZmZXJzb25cclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiR2FyZGVuIG9mIHRoZSBHb2RzXCIsXHJcbiAgICBsaW5rOiBnYXJkZXJHb2RzXHJcbiAgfVxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNlbGVjdG9ycyA9IHtcclxuICBjYXJkTGlzdDogJy5jYXJkcy1ncmlkJyxcclxuICBjYXJkVGVtcGxhdGU6ICcjY2FyZC10ZW1wbGF0ZScsXHJcbiAgcHJldmlld1BvcHVwOiAncG9wdXBfdHlwZV9wcmV2aWV3JyxcclxuICBwcm9maWxlUG9wdXA6ICdwb3B1cF90eXBlX2VkaXQnLFxyXG4gIGNhcmRQb3B1cDogJ3BvcHVwX3R5cGVfYWRkJyxcclxuICBlZGl0SW1hZ2VQb3B1cDogJ3BvcHVwX3R5cGVfcHJvZmlsZS1pbWFnZScsXHJcbiAgZGVsZXRlQ2FyZFBvcHVwOiAncG9wdXBfdHlwZV9kZWxldGUtY2FyZCcsXHJcbiAgbmFtZTogJ3Byb2ZpbGVfX25hbWUnLFxyXG4gIGpvYjogJ3Byb2ZpbGVfX2Fib3V0LW1lJyxcclxuICBpbWFnZTogJ3Byb2ZpbGVfX2ltYWdlJyxcclxuICBlZGl0QnV0dG9uOiAnLmVkaXQtYnV0dG9uJyxcclxuICBhZGRCdXR0b246ICcuYWRkLWJ1dHRvbicsXHJcbiAgcHJvZmlsZUltYWdlQnV0dG9uOiAnLnByb2ZpbGVfX2ltYWdlLXdyYXBwZXInLFxyXG4gIGRlbGV0ZUNhcmRCdXR0b246ICcuY2FyZF9fZGVsZXRlJ1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGVsZW1lbnRzID0ge1xyXG4gIGVkaXRGb3JtRWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfZWRpdCcpLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpLFxyXG4gIGFkZEZvcm1FbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9hZGQnKS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKSxcclxuICBlZGl0SW1hZ2VQcm9maWxlRm9ybUVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX3Byb2ZpbGUtaW1hZ2UnKS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKSxcclxuICBwcm9maWxlTmFtZUVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyksXHJcbiAgcHJvZmlsZUpvYkVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hYm91dC1tZScpLFxyXG4gIHByb2ZpbGVJbWFnZUVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19pbWFnZScpLFxyXG4gIHByb2ZpbGVJbWFnZVBvcHVwRWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF9pbWFnZV9saW5rJyksXHJcbiAgcHJvZmlsZU5hbWVQb3B1cEVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfZmllbGRfbmFtZScpLFxyXG4gIHByb2ZpbGVKb2JQb3B1cEVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfZmllbGRfYWJvdXQtbWUnKVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5wb3B1cF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwic3VibWl0LWJ1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIlxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHVzZXJDb25maWcgPSB7XHJcbiAgYmFzZVVybDogJ2h0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTInLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiZDMyZjZkZjYtYTQ3OC00NGM3LTk4ZTItMzlmMjBlZmI3ZmI0XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcclxuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBzZWxlY3RvcnMsIGVsZW1lbnRzLCB2YWxpZGF0aW9uU2V0dGluZ3MsIHVzZXJDb25maWcgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCJcclxuXHJcblxyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh1c2VyQ29uZmlnKTtcclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqXHJcbiAqIElOU1RBTkNFUyBDUkVBVElPTiAqXHJcbiAqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbih7XHJcbiAgaXRlbXM6IGluaXRpYWxDYXJkcyxcclxuICByZW5kZXJlcjogKGRhdGEpID0+IHtcclxuICAgIGNyZWF0ZUNhcmQoZGF0YSlcclxuICB9XHJcbn0sIHNlbGVjdG9ycy5jYXJkTGlzdClcclxuXHJcbmNvbnN0IGltYWdlUHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHNlbGVjdG9ycy5wcmV2aWV3UG9wdXApO1xyXG5cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3Rvcjogc2VsZWN0b3JzLm5hbWUsXHJcbiAgam9iU2VsZWN0b3I6IHNlbGVjdG9ycy5qb2IsXHJcbiAgaW1hZ2VTZWxlY3Rvcjogc2VsZWN0b3JzLmltYWdlXHJcbn0pXHJcblxyXG5jb25zdCB1c2VySW5mb1BvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IHNlbGVjdG9ycy5wcm9maWxlUG9wdXAsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcclxuICAgIGFwaS5zYXZlUHJvZmlsZUluZm8oeyBuYW1lOiBkYXRhLm5hbWUsIGFib3V0OiBkYXRhLmFib3V0TWUgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlcylcclxuICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSlcclxuICAgIHVwZGF0ZVByb2ZpbGVJbmZvKCk7XHJcbiAgICAvLyBlbGVtZW50cy5wcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgICAvLyBlbGVtZW50cy5wcm9maWxlSm9iRWxlbWVudC50ZXh0Q29udGVudCA9IGRhdGEuYWJvdXRNZTtcclxuICB9XHJcbn0pO1xyXG5cclxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IHNlbGVjdG9ycy5jYXJkUG9wdXAsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKHJhd0RhdGEpID0+IHtcclxuICAgIGNvbnN0IGRhdGEgPSB7XHJcbiAgICAgIG5hbWU6IHJhd0RhdGEudGl0bGUsXHJcbiAgICAgIGxpbms6IHJhd0RhdGEubGlua1xyXG4gICAgfTtcclxuICAgIGNyZWF0ZUNhcmQoZGF0YSk7XHJcbiAgfVxyXG59KTtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlSW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBzZWxlY3RvcnMuZWRpdEltYWdlUG9wdXAsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcclxuICAgIGFwaS5zYXZlUHJvZmlsZUltYWdlKHsgYXZhdGFyOiBkYXRhLmxpbmsgfSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKHJlcylcclxuICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSlcclxuICAgIC8vIHVwZGF0ZVByb2ZpbGVJbmZvKCk7XHJcbiAgICBlbGVtZW50cy5wcm9maWxlSW1hZ2VFbGVtZW50LnNyYyA9IGRhdGEubGluaztcclxuICB9XHJcbn0pO1xyXG5cclxuY29uc3QgZGVsZXRlQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IHNlbGVjdG9ycy5kZWxldGVDYXJkUG9wdXAsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKCkgPT4ge1xyXG4gICAgaGFuZGxlRGVsZXRlQ2FyZCgpO1xyXG4gIH1cclxufSk7XHJcblxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgZWxlbWVudHMuZWRpdEZvcm1FbGVtZW50KTtcclxuXHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGVsZW1lbnRzLmFkZEZvcm1FbGVtZW50KTtcclxuXHJcbmNvbnN0IGVkaXRJbWFnZVByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBlbGVtZW50cy5lZGl0SW1hZ2VQcm9maWxlRm9ybUVsZW1lbnQpO1xyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKipcclxuICogQ1JFQVRFIENBUkQgRlVOQ1RJT04gKlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuY29uc3QgY3JlYXRlQ2FyZCA9IChkYXRhKSA9PiB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZCh7XHJcbiAgICBkYXRhLCBoYW5kbGVDYXJkQ2xpY2s6IChpbWFnZURhdGEpID0+IHtcclxuICAgICAgaW1hZ2VQcmV2aWV3UG9wdXAub3BlbihpbWFnZURhdGEpO1xyXG4gICAgfVxyXG4gIH0sIHNlbGVjdG9ycy5jYXJkVGVtcGxhdGUpXHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudC5nZW5lcmF0ZUNhcmQoKSlcclxuICByZXR1cm4gY2FyZEVsZW1lbnRcclxufTtcclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiBJTlNUQU5DRVMgSU5JWklBTElaQVRJT04gKlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmVkaXRJbWFnZVByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuaW1hZ2VQcmV2aWV3UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxudXNlckluZm9Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZWRpdFByb2ZpbGVJbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmRlbGV0ZUNhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKipcclxuICogT1BFTiBCVVRUT04gSEFORExFUlMgKlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmVkaXRCdXR0b24pO1xyXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGNvbnN0IHsgbmFtZSwgam9iIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIGVsZW1lbnRzLnByb2ZpbGVOYW1lUG9wdXBFbGVtZW50LnZhbHVlID0gbmFtZTtcclxuICBlbGVtZW50cy5wcm9maWxlSm9iUG9wdXBFbGVtZW50LnZhbHVlID0gam9iO1xyXG4gIHVzZXJJbmZvUG9wdXAub3BlbigpO1xyXG59KVxyXG5cclxuY29uc3QgYWRkTW9kYWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5hZGRCdXR0b24pO1xyXG5hZGRNb2RhbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBuZXdDYXJkUG9wdXAub3BlbigpO1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uKCk7XHJcbn0pXHJcblxyXG5jb25zdCBwcm9maWxlSW1hZ2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wcm9maWxlSW1hZ2VCdXR0b24pO1xyXG5wcm9maWxlSW1hZ2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBpbWFnZSB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBlbGVtZW50cy5wcm9maWxlSW1hZ2VQb3B1cEVsZW1lbnQudmFsdWUgPSBpbWFnZTtcclxuICBlZGl0UHJvZmlsZUltYWdlUG9wdXAub3BlbigpO1xyXG4gIGVkaXRJbWFnZVByb2ZpbGVGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvbigpO1xyXG59KVxyXG5cclxuXHJcbi8vIEVMSU1JTkFSRSBMRSBDT1NUQU5USSBJTlVUSUxJXHJcblxyXG4vLyBjb25zdCBkZWxldGVDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuZGVsZXRlQ2FyZEJ1dHRvbik7XHJcbi8vIGRlbGV0ZUNhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbi8vICAgZGVsZXRlQ2FyZFBvcHVwLm9wZW4oKTtcclxuLy8gfSlcclxuXHJcblxyXG4vKioqKioqKlxyXG4gKiBBUEkgKlxyXG4gKioqKioqKi9cclxuXHJcbi8vIGFwaS5nZXRQcm9maWxlSW5mbygpLnRoZW4oKGRhdGEpID0+IHtcclxuLy8gICBjb25zdCB7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSA9IGRhdGE7XHJcbi8vICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dE1lOiBhYm91dCwgbGluazogYXZhdGFyIH0pXHJcbi8vIH0pLmNhdGNoKChlcnIpID0+IHtcclxuLy8gICBjb25zb2xlLmxvZyhlcnIpO1xyXG4vLyB9KVxyXG5cclxuY29uc3QgdXBkYXRlUHJvZmlsZUluZm8gPSAoKSA9PiB7XHJcbiAgYXBpLmdldFByb2ZpbGVJbmZvKCkudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgY29uc3QgeyBuYW1lLCBhYm91dCwgYXZhdGFyIH0gPSBkYXRhO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dE1lOiBhYm91dCwgbGluazogYXZhdGFyIH0pXHJcbiAgfSkuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9KVxyXG59XHJcblxyXG51cGRhdGVQcm9maWxlSW5mbygpO1xyXG5cclxuIiwiY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcclxuICAgIHRoaXMuYmFzZVVybCA9IGNvbmZpZy5iYXNlVXJsO1xyXG4gICAgdGhpcy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBnZXRQcm9maWxlSW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnNcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSlcclxuICB9XHJcblxyXG4gIHNhdmVQcm9maWxlSW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBhYm91dDogYWJvdXRcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ0RhdGEgc2F2ZWQgY29ycmVjdGx5LicpXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSlcclxuICB9XHJcblxyXG4gIHNhdmVQcm9maWxlSW1hZ2UoeyBhdmF0YXIgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBhdmF0YXJcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ0ltYWdlIHNhdmVkIGNvcnJlY3RseS4nKVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pXHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBcGk7XHJcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInAiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsImlucHV0IiwiZXJyb3JFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInJlbW92ZSIsIl9oYXNWYWxpZElucHV0IiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX2lucHV0TGlzdCIsImV2ZXJ5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ0b2dnbGVCdXR0b24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsIkNhcmQiLCJjYXJkU2VsZWN0b3IiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2hhbmRsZUNhcmRDbGljayIsIl9jYXJkU2VsZWN0b3IiLCJfZWxlbWVudCIsIl9oYW5kbGVMaWtlSWNvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwidGFyZ2V0IiwidG9nZ2xlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2dldFRlbXBsYXRlIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJTZWN0aW9uIiwic2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NVcCIsImJpbmQiLCJrZXkiLCJjbG9zZSIsImNvbnRhaW5zIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aEltYWdlIiwiX2NhcmRJbWFnZSIsInNyYyIsImFsdCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0IiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2lucHV0cyIsIl92YWx1ZXMiLCJ2YWx1ZSIsImV2ZW50IiwiX2dldElucHV0VmFsdWVzIiwicmVzZXQiLCJVc2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiaW1hZ2VTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9qb2JFbGVtZW50IiwiX2ltYWdlRWxlbWVudCIsImpvYiIsImltYWdlIiwiYWJvdXRNZSIsImluaXRpYWxDYXJkcyIsImVsZW1lbnRzIiwiZWRpdEZvcm1FbGVtZW50IiwiYWRkRm9ybUVsZW1lbnQiLCJlZGl0SW1hZ2VQcm9maWxlRm9ybUVsZW1lbnQiLCJwcm9maWxlTmFtZUVsZW1lbnQiLCJwcm9maWxlSm9iRWxlbWVudCIsInByb2ZpbGVJbWFnZUVsZW1lbnQiLCJwcm9maWxlSW1hZ2VQb3B1cEVsZW1lbnQiLCJwcm9maWxlTmFtZVBvcHVwRWxlbWVudCIsInByb2ZpbGVKb2JQb3B1cEVsZW1lbnQiLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJhcGkiLCJBcGkiLCJjb25maWciLCJiYXNlVXJsIiwiaGVhZGVycyIsImZldGNoIiwidGhlbiIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsImNhcmRTZWN0aW9uIiwiY3JlYXRlQ2FyZCIsImltYWdlUHJldmlld1BvcHVwIiwidXNlckluZm8iLCJ1c2VySW5mb1BvcHVwIiwic2F2ZVByb2ZpbGVJbmZvIiwidXBkYXRlUHJvZmlsZUluZm8iLCJuZXdDYXJkUG9wdXAiLCJyYXdEYXRhIiwidGl0bGUiLCJlZGl0UHJvZmlsZUltYWdlUG9wdXAiLCJzYXZlUHJvZmlsZUltYWdlIiwiZGVsZXRlQ2FyZFBvcHVwIiwiaGFuZGxlRGVsZXRlQ2FyZCIsImVkaXRGb3JtVmFsaWRhdG9yIiwiYWRkRm9ybVZhbGlkYXRvciIsImVkaXRJbWFnZVByb2ZpbGVGb3JtVmFsaWRhdG9yIiwiY2FyZEVsZW1lbnQiLCJpbWFnZURhdGEiLCJvcGVuIiwiYWRkSXRlbSIsImdlbmVyYXRlQ2FyZCIsImVuYWJsZVZhbGlkYXRpb24iLCJyZW5kZXJJdGVtcyIsInNldEV2ZW50TGlzdGVuZXJzIiwiZ2V0VXNlckluZm8iLCJnZXRQcm9maWxlSW5mbyIsInNldFVzZXJJbmZvIl0sInNvdXJjZVJvb3QiOiIifQ==