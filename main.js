!function(){"use strict";var e={771:function(e,t,n){e.exports=n.p+"3b5bf5d8808b2f69dc93.png"},84:function(e,t,n){e.exports=n.p+"be477f46c50757f14802.png"},617:function(e,t,n){e.exports=n.p+"06170a03ad0b87abc0cc.png"},774:function(e,t,n){e.exports=n.p+"2e68ff2310a781480a3b.png"},689:function(e,t,n){e.exports=n.p+"4c7210e42f7571d8ad5b.png"},475:function(e,t,n){e.exports=n.p+"1c7f1e69704a62f4c8d8.png"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.p="",function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}var r,o;return r=n,(o=[{key:"_showInputError",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._inputErrorClass)}},{key:"_hideInputError",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._inputErrorClass)}},{key:"toggleButton",value:function(){this._hasValidInput()?(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass)):(this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass))}},{key:"_hasValidInput",value:function(){return this._inputList.every((function(e){return!0===e.validity.valid}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_setEventListeners",value:function(){var t,n=this;this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputList=function(t){if(Array.isArray(t))return e(t)}(t=this._form.querySelectorAll(this._inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){n._checkInputValidity(e),n.toggleButton()}))}))}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){return e.preventDefault()})),this._setEventListeners()}}])&&t(r.prototype,o),n}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.data,o=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=r.name,this._link=r.link,this._handleCardClick=o,this._cardSelector=n}var t,n;return t=e,(n=[{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".card__image").addEventListener("click",(function(){return e._handleCardClick({link:e._link,name:e._name})})),this._element.querySelector(".card__like").addEventListener("click",(function(t){return e._handleLikeIcon(t)})),this._element.querySelector(".card__delete").addEventListener("click",(function(){return e._handleDeleteCard()}))}},{key:"_handleLikeIcon",value:function(e){e.target.classList.toggle("card__like_active")}},{key:"_handleDeleteCard",value:function(){this._element.remove(),this._element=null}},{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".card__image").style.backgroundImage="url(".concat(this._link,")"),this._element.querySelector(".card__title").textContent=this._name,this._element}}])&&o(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&a(t.prototype,n),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(".".concat(t)),this._handleEscUp=this._handleEscUp.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscUp",value:function(e){"Escape"==e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){(t.target.classList.contains("popup")||t.target.classList.contains("close-button"))&&e.close()}))}},{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscUp)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscUp)}}])&&c(t.prototype,n),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=m(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._cardImage=t._popupElement.querySelector(".popup__preview-image"),t}return t=a,(n=[{key:"open",value:function(e){this._popupElement.querySelector(".popup__caption").textContent=e.name,this._cardImage.src=e.link,this._cardImage.alt="Preview of ".concat(e.name),f(y(a.prototype),"open",this).call(this)}}])&&p(t.prototype,n),a}(l);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=E(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function k(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return k(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._popupForm=t._popupElement.querySelector(".popup__form"),t._handleFormSubmit=r,t._inputs=t._popupElement.querySelectorAll(".popup__input"),t._values={},t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputs.forEach((function(t){e._values[t.name]=t.value})),this._values}},{key:"setEventListeners",value:function(){var e=this;g(w(a.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}},{key:"close",value:function(){this._popupForm.reset(),g(w(a.prototype),"close",this).call(this)}}])&&b(t.prototype,n),a}(l);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var I=function(){function e(t){var n=t.nameSelector,r=t.jobSelector,o=t.imageSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(".".concat(n)),this._jobElement=document.querySelector(".".concat(r)),this._imageElement=document.querySelector(".".concat(o))}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,job:this._jobElement.textContent,image:this._imageElement.src}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.aboutMe,r=e.link;this._nameElement.textContent=t,this._jobElement.textContent=n,this._imageElement.src=r}}])&&j(t.prototype,n),e}(),P=[{name:"Palouse Falls",link:n(475)},{name:"Ghost town of Bodie",link:n(689)},{name:"Car Forest",link:n(84)},{name:"Byodo-In Temple",link:n(771)},{name:"Fort Jefferson",link:n(617)},{name:"Garden of the Gods",link:n(774)}],L={editFormElement:document.querySelector(".popup_type_edit").querySelector(".popup__form"),addFormElement:document.querySelector(".popup_type_add").querySelector(".popup__form"),editImageProfileFormElement:document.querySelector(".popup_type_profile-image").querySelector(".popup__form"),profileNameElement:document.querySelector(".profile__name"),profileJobElement:document.querySelector(".profile__about-me"),profileImageElement:document.querySelector(".profile__image"),profileImagePopupElement:document.querySelector(".popup__input_image_link"),profileNamePopupElement:document.querySelector(".popup__input_field_name"),profileJobPopupElement:document.querySelector(".popup__input_field_about-me")},O={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"submit-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}var t,n;return t=e,(n=[{key:"getProfileInfo",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers}).then((function(e){return e.ok?(console.log("Data load correctly, code status: ".concat(e.status)),e.json()):Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"saveProfileInfo",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:t,about:n})}).then((function(e){return e.ok?(console.log("Code status: ".concat(e.status,",\ndata saved correctly.")),e.json()):Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"saveProfileImage",value:function(e){var t=e.avatar;return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?(console.log("Code status: ".concat(e.status,",\nimage saved correctly.")),e.json()):Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}}])&&q(t.prototype,n),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"d32f6df6-a478-44c7-98e2-39f20efb7fb4","Content-Type":"application/json"}}),B=new u({items:P,renderer:function(e){M(e)}},".cards-grid"),F=new _("popup_type_preview"),T=new I({nameSelector:"profile__name",jobSelector:"profile__about-me",imageSelector:"profile__image"}),R=new C({popupSelector:"popup_type_edit",handleFormSubmit:function(e){x.saveProfileInfo({name:e.name,about:e.aboutMe}).then((function(e){L.profileNameElement.textContent=e.name,L.profileJobElement.textContent=e.about}))}}),U=new C({popupSelector:"popup_type_add",handleFormSubmit:function(e){var t={name:e.title,link:e.link};M(t)}}),A=new C({popupSelector:"popup_type_profile-image",handleFormSubmit:function(e){x.saveProfileImage({avatar:e.link}).then((function(e){L.profileImageElement.src=e.avatar}))}}),D=new C({popupSelector:"popup_type_delete-card",handleFormSubmit:function(){handleDeleteCard()}}),V=new r(O,L.editFormElement),J=new r(O,L.addFormElement),N=new r(O,L.editImageProfileFormElement),M=function(e){var t=new i({data:e,handleCardClick:function(e){F.open(e)}},"#card-template");return B.addItem(t.generateCard()),t};V.enableValidation(),J.enableValidation(),N.enableValidation(),B.renderItems(),F.setEventListeners(),R.setEventListeners(),U.setEventListeners(),A.setEventListeners(),D.setEventListeners(),document.querySelector(".edit-button").addEventListener("click",(function(){var e=T.getUserInfo(),t=e.name,n=e.job;L.profileNamePopupElement.value=t,L.profileJobPopupElement.value=n,R.open()})),document.querySelector(".add-button").addEventListener("click",(function(){U.open(),J.toggleButton()})),document.querySelector(".profile__image-wrapper").addEventListener("click",(function(){var e=T.getUserInfo().image;L.profileImagePopupElement.value=e,A.open(),N.toggleButton()})),x.getProfileInfo().then((function(e){var t=e.name,n=e.about,r=e.avatar;T.setUserInfo({name:t,aboutMe:n,link:r})})).catch((function(e){console.log(e)}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFVeUMsRUFBU3FCLGNBQW5COUQsTUFDUkcsRUFBQUEseUJBQUFBLE1BQTBDSCxFQUMxQytDLEVBQXNCUyxPQUN0QkgsRUFBOEJ2SCxrQkF1QmhDZ0YsRUFBSWlELGlCQUFpQjNDLE1BQUssU0FBQ2hGLEdBQ3pCLElBQVFHLEVBQXdCSCxFQUF4QkcsS0FBTXdGLEVBQWtCM0YsRUFBbEIyRixNQUFPSyxFQUFXaEcsRUFBWGdHLE9BQ3JCSyxFQUFTdUIsWUFBWSxDQUFFekgsS0FBQUEsRUFBTTBELFFBQVM4QixFQUFPdEYsS0FBTTJGLE9BQ2xEUCxPQUFNLFNBQUNDLEdBQ1JQLFFBQVFDLElBQUlNLE0iLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80L3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ydW50aW1lL3B1YmxpY1BhdGgiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsIi8qKlxyXG4gKiBWYWxpZGF0aW9uIGZvciBhbGwgdGhlIHBvcHVwcy5cclxuICogQHBhcmFtICB7fSBzZXR0aW5ncyAtIHZhbGlkYXRpb25TZXR0aW5ncyBvYmplY3QgZm9yIHRoZSBpbnB1dHMgdmFsaWRhdGlvbi5cclxuICogQHBhcmFtICB7fSBmb3JtRWxlbWVudCAtIGFkZEZvcm0gb3IgZWRpdEZvcm0gcG9wdXAuXHJcbiAqL1xyXG5jbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yXHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzc1xyXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzXHJcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzc1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBQcml2YXRlIG1ldGhvZCB0byBzaG93IGFuIGVycm9yXHJcbiAgICogQHBhcmFtICB7fSBpbnB1dCAtIElucHV0IHBhc3NlZCB0aHJvdWdoIHRoZSBmb3Jtcy5cclxuICAgKi9cclxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYClcclxuICAgIC8vIEFkZCBlcnJvciBtZXNzYWdlIGFuZCBjbGFzc1xyXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpXHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZVxyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKVxyXG4gIH07XHJcblxyXG4gIC8qKlxyXG4gICAqIFByaXZhdGUgbWV0aG9kIHRvIGhpZGUgYW4gZXJyb3IuXHJcbiAgICogQHBhcmFtICB7fSBpbnB1dCAtIElucHV0IHBhc3NlZCB0aHJvdWdoIHRoZSBmb3Jtcy5cclxuICAgKi9cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgIyR7aW5wdXQuaWR9LWVycm9yYClcclxuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKVxyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBQdWJsaWMgbWV0aG9kIHRoYXQgdG9nZ2xlIHRoZSBzdWJtaXQgYnV0dG9uLlxyXG4gICAqL1xyXG4gIHRvZ2dsZUJ1dHRvbigpIHtcclxuICAgIGlmICh0aGlzLl9oYXNWYWxpZElucHV0KCkpIHtcclxuICAgICAgLy8gTWFrZSB0aGUgYnV0dG9uIGVuYWJsZWRcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2VcclxuICAgICAgLy8gUmVtb3ZlIHRoZSBkaXNhYmxlZCBjbGFzcyBmb3IgdGhlIGJ1dHRvblxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gTWFrZSB0aGUgYnV0dG9uIGRpc2FibGVkXHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcclxuICAgICAgLy8gQWRkIHRoZSBkaXNhYmxlZCBjbGFzcyBmb3IgdGhlIGJ1dHRvblxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2hlY2sgaWYgdGhlIGlucHV0cyBhcmUgdmFsaWQuXHJcbiAgICovXHJcbiAgX2hhc1ZhbGlkSW5wdXQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LmV2ZXJ5KChpbnB1dCkgPT4gaW5wdXQudmFsaWRpdHkudmFsaWQgPT09IHRydWUpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBJZiB0aGUgY29uZGl0aW9uIGlzIHRydWUsIGhpZGUgdGhlIGVycm9yLCBpZiBpdCBpcyBmYWxzZSwgc2hvdyB0aGUgZXJyb3IuXHJcbiAgICogQHBhcmFtICB7fSBpbnB1dCAtIElucHV0IHBhc3NlZCB0aHJvdWdoIHRoZSBmb3Jtcy5cclxuICAgKi9cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KSB7XHJcbiAgICBpZiAoaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEhhbmRsZSB0aGUgZXZlbnQgbGlzdGVuZXJzIGZvciB0aGUgaW5wdXRzLlxyXG4gICAqL1xyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvcilcclxuICAgIC8vIEdyYWIgZWFjaCBvbmUgb2YgdGhlIGlucHV0c1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gWy4uLnRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKV1cclxuICAgIC8vIFRvZ2dsZSB0aGUgYnV0dG9uIGJlZm9yZSB3ZSBzdGFydCBsaXN0ZW5pbmcgdG8gdGhlIGlucHV0IGV2ZW4sIG90aGVyd2lzZSB0aGUgYnV0dG9uIHdpbGwgYmUgYWN0aXZlIHdoZW4gd2UgbG9hZCB0aGUgcGFnZSBldmVuIGlmIHRoZSBpbnB1dCBmaWVsZHMgYXJlIGludmFsaWRcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICAvLyBDaGVjayB2YWxpZGl0eSBvZiB0aGUgaW5wdXRcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpXHJcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b24oKVxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEVuYWJsZSB0aGUgdmFsaWRhdGlvbiBmb3IgdGhlIGZvcm1zLlxyXG4gICAqL1xyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IGV2dC5wcmV2ZW50RGVmYXVsdCgpKSAgLy8gUHJldmVudCB0aGUgZGVmYXVsdCBiZWhhdmlvciBvZiB0aGUgZm9ybSB3aGVuIHdlIGFyZSBzdWJtaXR0aW5nIHNvbWV0aGluZywgdGhlbiB3ZSBjYW4gbG9vcCBvdXIgaW5wdXQgZWxlbWVudHNcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCkgIC8vIEltcGxlbWVudGF0aW9uIG9mIHRoZSBsaXN0ZW5lclxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcclxuIiwiLyoqXHJcbiAqIEhhbmRsZSB0aGUgY3JlYXRpb24gb2YgdGhlIGNhcmQgZWxlbWVudC5cclxuICogQHBhcmFtICB7fSBkYXRhIC0gQ2FyZCBuYW1lIGFuZCBjYXJkIGxpbmsuXHJcbiAqIEBwYXJhbSAge30gY2FyZFNlbGVjdG9yIC0gQ2FyZCBpZCB0ZW1wbGF0ZS5cclxuICovXHJcbmNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgaGFuZGxlQ2FyZENsaWNrIH0sIGNhcmRTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZVxyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGlua1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yICAvLyBUZW1wbGF0ZSBvZiBvdXIgY2FyZFxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogRXZlbnQgbGlzdGVuZXJzIGhhbmRsZXIuXHJcbiAgICovXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUNhcmRDbGljayh7IGxpbms6IHRoaXMuX2xpbmssIG5hbWU6IHRoaXMuX25hbWUgfSkpXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19saWtlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB0aGlzLl9oYW5kbGVMaWtlSWNvbihldnQpKVxyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fZGVsZXRlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCkpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBIYW5kbGUgdGhlIGxpa2UgYnV0dG9uLlxyXG4gICAqIEBwYXJhbSAge30gZXZ0XHJcbiAgICovXHJcbiAgX2hhbmRsZUxpa2VJY29uKGV2dCkge1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19saWtlX2FjdGl2ZScpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBIYW5kbGUgdGhlIGRlbGV0ZSBidXR0b24uXHJcbiAgICovXHJcbiAgX2hhbmRsZURlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpXHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbFxyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQ2xvbmUgdGhlIGNhcmQgdGVtcGxhdGUuXHJcbiAgICovXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkJykuY2xvbmVOb2RlKHRydWUpXHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBIYW5kbGUgdGhlIGNhcmQgZ2VuZXJhdGlvbi5cclxuICAgKi9cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKVxyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKVxyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKS5zdHlsZS5iYWNrZ3JvdW5kSW1hZ2UgPSBgdXJsKCR7dGhpcy5fbGlua30pYFxyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWVcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBDYXJkO1xyXG4iLCJjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBzZWxlY3Rvcikge1xyXG5cclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcblxyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaChpdGVtID0+IHRoaXMuX3JlbmRlcmVyKGl0ZW0pKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xyXG4iLCJjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7cG9wdXBTZWxlY3Rvcn1gKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY1VwID0gdGhpcy5faGFuZGxlRXNjVXAuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NVcChldnQpIHtcclxuICAgIC8vIFByZXZlbnQgZGVmYXVsdCBhbmQgaWYgZXZlbnQgd2FzIG9uIEVTQyBidXR0b24gLT4gY2FsbCBcImNsb3NlXCIgbWV0aG9kXHJcbiAgICBpZiAoZXZ0LmtleSA9PSAnRXNjYXBlJykge1xyXG4gICAgICB0aGlzLmNsb3NlKClcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgLy8gQ3JlYXRlIGFuIGV2ZW50IGxpc3RlbmVyIGZvciBjbGljayBvbiB0aGUgQ0xPU0UgYnV0dG9uIG9yIHB1cHVwIGhhbGYtdHJhc3BhcmVudCBiYWNrZ3JvdW5kXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAnKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2xvc2UtYnV0dG9uJykpIHtcclxuICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgLy8gYWRkcyBhIG5ldyBjbGFzcyBhbmQgYW4gZXZlbnQgbGlzdGVuZXIsIHRvIGxpc3RlbiB0aGUgRVNDIGJ1dHRvblxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY1VwKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgLy8gcmVtb3ZlcyBhIG5ldyBjbGFzcyB3ZSBhZGRlZCBhbmQgcmVtb3ZlcyBhbiBldmVudCBsaXN0ZW5lciBmb3IgdGhlIEVTQyBidXR0b25cclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NVcCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cDtcclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xyXG5cclxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19wcmV2aWV3LWltYWdlJyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKGRhdGEpIHtcclxuICAgIC8vIHB1dHMgJ25hbWUnIGZyb20gYXJncyB0byB0aGUgJy5wb3B1cF9fY2FwdGlvbicgc2VsZWN0b3JcclxuICAgIC8vIGZpbmQgaW1hZ2UgYnkgdGhlICdwb3B1cF9faW1hZ2UnIHNlbGVjdG9yLCBzZXQgJ3NyYycgYW5kICdhbHQnIGZvciBpdFxyXG4gICAgLy8gY2FsbCBzdXBlci5vcGVuKCksIGl0IHdpbGwgY2FsbCB0aGUgb3JnaW5hbCBtZXRob2QgZnJvbSB0aGUgb3JpZ2luYWwgUG9wdXAgY2xhc3NcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcHRpb24nKS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gYFByZXZpZXcgb2YgJHtkYXRhLm5hbWV9YDtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlO1xyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XHJcblxyXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5faW5wdXRzID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcclxuICAgIHRoaXMuX3ZhbHVlcyA9IHt9O1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xyXG4gICAgICB0aGlzLl92YWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZVxyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5fdmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcclxuICAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xyXG4iLCJjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBpbWFnZVNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7bmFtZVNlbGVjdG9yfWApO1xyXG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2pvYlNlbGVjdG9yfWApO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW1hZ2VTZWxlY3Rvcn1gKTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgLy8gUmV0dXJucyBhbiBvYmplY3Qgd2l0aCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgdXNlci5cclxuICAgIC8vIFRoaXMgbWV0aG9kIHdpbGwgYmUgaGFuZHkgZm9yIGNhc2VzIHdoZW4gaXQncyBuZWNlc3NhcnkgdG8gZGlzcGxheSB0aGUgdXNlclxyXG4gICAgLy8gZGF0YSBpbiB0aGUgb3BlbiBmb3JtLlxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgaW1hZ2U6IHRoaXMuX2ltYWdlRWxlbWVudC5zcmNcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0TWUsIGxpbmsgfSkge1xyXG4gICAgLy8gVGFrZXMgbmV3IHVzZXIgZGF0YSBhbmQgYWRkcyBpdCBvbiB0aGUgcGFnZS5cclxuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBhYm91dE1lO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBVc2VySW5mbztcclxuIiwiaW1wb3J0IHBhbG91c2VGYWxscyBmcm9tIFwiLi4vaW1hZ2VzL3BhbG91c2UtZmFsbHMucG5nXCI7XHJcbmltcG9ydCBnaG9zdFRvd24gZnJvbSBcIi4uL2ltYWdlcy9naG9zdC10b3duLW9mLWJvZGllLnBuZ1wiO1xyXG5pbXBvcnQgY2FyRm9yZXN0IGZyb20gXCIuLi9pbWFnZXMvY2FyLWZvcmVzdC5wbmdcIjtcclxuaW1wb3J0IGJ5b2RvVGVtcGxlIGZyb20gXCIuLi9pbWFnZXMvYnlvZG8taW4tdGVtcGxlLnBuZ1wiO1xyXG5pbXBvcnQgZm9ydEplZmZlcnNvbiBmcm9tIFwiLi4vaW1hZ2VzL2ZvcnQtamVmZmVyc29uLnBuZ1wiO1xyXG5pbXBvcnQgZ2FyZGVyR29kcyBmcm9tIFwiLi4vaW1hZ2VzL2dhcmRlbi1vZi10aGUtZ29kcy5wbmdcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogXCJQYWxvdXNlIEZhbGxzXCIsXHJcbiAgICBsaW5rOiBwYWxvdXNlRmFsbHNcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiR2hvc3QgdG93biBvZiBCb2RpZVwiLFxyXG4gICAgbGluazogZ2hvc3RUb3duXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkNhciBGb3Jlc3RcIixcclxuICAgIGxpbms6IGNhckZvcmVzdFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCeW9kby1JbiBUZW1wbGVcIixcclxuICAgIGxpbms6IGJ5b2RvVGVtcGxlXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkZvcnQgSmVmZmVyc29uXCIsXHJcbiAgICBsaW5rOiBmb3J0SmVmZmVyc29uXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkdhcmRlbiBvZiB0aGUgR29kc1wiLFxyXG4gICAgbGluazogZ2FyZGVyR29kc1xyXG4gIH1cclxuXTtcclxuXHJcbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XHJcbiAgY2FyZExpc3Q6ICcuY2FyZHMtZ3JpZCcsXHJcbiAgY2FyZFRlbXBsYXRlOiAnI2NhcmQtdGVtcGxhdGUnLFxyXG4gIHByZXZpZXdQb3B1cDogJ3BvcHVwX3R5cGVfcHJldmlldycsXHJcbiAgcHJvZmlsZVBvcHVwOiAncG9wdXBfdHlwZV9lZGl0JyxcclxuICBjYXJkUG9wdXA6ICdwb3B1cF90eXBlX2FkZCcsXHJcbiAgZWRpdEltYWdlUG9wdXA6ICdwb3B1cF90eXBlX3Byb2ZpbGUtaW1hZ2UnLFxyXG4gIGRlbGV0ZUNhcmRQb3B1cDogJ3BvcHVwX3R5cGVfZGVsZXRlLWNhcmQnLFxyXG4gIG5hbWU6ICdwcm9maWxlX19uYW1lJyxcclxuICBqb2I6ICdwcm9maWxlX19hYm91dC1tZScsXHJcbiAgaW1hZ2U6ICdwcm9maWxlX19pbWFnZScsXHJcbiAgZWRpdEJ1dHRvbjogJy5lZGl0LWJ1dHRvbicsXHJcbiAgYWRkQnV0dG9uOiAnLmFkZC1idXR0b24nLFxyXG4gIHByb2ZpbGVJbWFnZUJ1dHRvbjogJy5wcm9maWxlX19pbWFnZS13cmFwcGVyJyxcclxuICBkZWxldGVDYXJkQnV0dG9uOiAnLmNhcmRfX2RlbGV0ZSdcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBlbGVtZW50cyA9IHtcclxuICBlZGl0Rm9ybUVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2VkaXQnKS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKSxcclxuICBhZGRGb3JtRWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfYWRkJykucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyksXHJcbiAgZWRpdEltYWdlUHJvZmlsZUZvcm1FbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9wcm9maWxlLWltYWdlJykucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyksXHJcbiAgcHJvZmlsZU5hbWVFbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fbmFtZScpLFxyXG4gIHByb2ZpbGVKb2JFbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWJvdXQtbWUnKSxcclxuICBwcm9maWxlSW1hZ2VFbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9faW1hZ2UnKSxcclxuICBwcm9maWxlSW1hZ2VQb3B1cEVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfaW1hZ2VfbGluaycpLFxyXG4gIHByb2ZpbGVOYW1lUG9wdXBFbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X2ZpZWxkX25hbWUnKSxcclxuICBwcm9maWxlSm9iUG9wdXBFbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X2ZpZWxkX2Fib3V0LW1lJylcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInN1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCJcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCB1c2VyQ29uZmlnID0ge1xyXG4gIGJhc2VVcmw6ICdodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL2dyb3VwLTEyJyxcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcImQzMmY2ZGY2LWE0NzgtNDRjNy05OGUyLTM5ZjIwZWZiN2ZiNFwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCJcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7IGluaXRpYWxDYXJkcywgc2VsZWN0b3JzLCBlbGVtZW50cywgdmFsaWRhdGlvblNldHRpbmdzLCB1c2VyQ29uZmlnIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiXHJcblxyXG5cclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkodXNlckNvbmZpZyk7XHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiBJTlNUQU5DRVMgQ1JFQVRJT04gKlxyXG4gKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbmNvbnN0IGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oe1xyXG4gIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXHJcbiAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XHJcbiAgICBjcmVhdGVDYXJkKGRhdGEpXHJcbiAgfVxyXG59LCBzZWxlY3RvcnMuY2FyZExpc3QpXHJcblxyXG5jb25zdCBpbWFnZVByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShzZWxlY3RvcnMucHJldmlld1BvcHVwKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lU2VsZWN0b3I6IHNlbGVjdG9ycy5uYW1lLFxyXG4gIGpvYlNlbGVjdG9yOiBzZWxlY3RvcnMuam9iLFxyXG4gIGltYWdlU2VsZWN0b3I6IHNlbGVjdG9ycy5pbWFnZVxyXG59KVxyXG5cclxuY29uc3QgdXNlckluZm9Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBzZWxlY3RvcnMucHJvZmlsZVBvcHVwLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XHJcbiAgICBhcGkuc2F2ZVByb2ZpbGVJbmZvKHsgbmFtZTogZGF0YS5uYW1lLCBhYm91dDogZGF0YS5hYm91dE1lIH0pLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBlbGVtZW50cy5wcm9maWxlTmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSByZXMubmFtZTtcclxuICAgICAgZWxlbWVudHMucHJvZmlsZUpvYkVsZW1lbnQudGV4dENvbnRlbnQgPSByZXMuYWJvdXQ7XHJcbiAgICB9KVxyXG4gIH1cclxufSk7XHJcblxyXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3Rvcjogc2VsZWN0b3JzLmNhcmRQb3B1cCxcclxuICBoYW5kbGVGb3JtU3VibWl0OiAocmF3RGF0YSkgPT4ge1xyXG4gICAgY29uc3QgZGF0YSA9IHtcclxuICAgICAgbmFtZTogcmF3RGF0YS50aXRsZSxcclxuICAgICAgbGluazogcmF3RGF0YS5saW5rXHJcbiAgICB9O1xyXG4gICAgY3JlYXRlQ2FyZChkYXRhKTtcclxuICB9XHJcbn0pO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVJbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IHNlbGVjdG9ycy5lZGl0SW1hZ2VQb3B1cCxcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xyXG4gICAgYXBpLnNhdmVQcm9maWxlSW1hZ2UoeyBhdmF0YXI6IGRhdGEubGluayB9KS50aGVuKChyZXMpID0+IHtcclxuICAgICAgZWxlbWVudHMucHJvZmlsZUltYWdlRWxlbWVudC5zcmMgPSByZXMuYXZhdGFyO1xyXG4gICAgfSlcclxuICB9XHJcbn0pO1xyXG5cclxuY29uc3QgZGVsZXRlQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IHNlbGVjdG9ycy5kZWxldGVDYXJkUG9wdXAsXHJcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKCkgPT4ge1xyXG4gICAgaGFuZGxlRGVsZXRlQ2FyZCgpO1xyXG4gIH1cclxufSk7XHJcblxyXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgZWxlbWVudHMuZWRpdEZvcm1FbGVtZW50KTtcclxuXHJcbmNvbnN0IGFkZEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uU2V0dGluZ3MsIGVsZW1lbnRzLmFkZEZvcm1FbGVtZW50KTtcclxuXHJcbmNvbnN0IGVkaXRJbWFnZVByb2ZpbGVGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBlbGVtZW50cy5lZGl0SW1hZ2VQcm9maWxlRm9ybUVsZW1lbnQpO1xyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKipcclxuICogQ1JFQVRFIENBUkQgRlVOQ1RJT04gKlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuY29uc3QgY3JlYXRlQ2FyZCA9IChkYXRhKSA9PiB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZCh7XHJcbiAgICBkYXRhLCBoYW5kbGVDYXJkQ2xpY2s6IChpbWFnZURhdGEpID0+IHtcclxuICAgICAgaW1hZ2VQcmV2aWV3UG9wdXAub3BlbihpbWFnZURhdGEpO1xyXG4gICAgfVxyXG4gIH0sIHNlbGVjdG9ycy5jYXJkVGVtcGxhdGUpXHJcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudC5nZW5lcmF0ZUNhcmQoKSlcclxuICByZXR1cm4gY2FyZEVsZW1lbnRcclxufTtcclxuXHJcblxyXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG4gKiBJTlNUQU5DRVMgSU5JWklBTElaQVRJT04gKlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuXHJcbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbmVkaXRJbWFnZVByb2ZpbGVGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuaW1hZ2VQcmV2aWV3UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxudXNlckluZm9Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuZWRpdFByb2ZpbGVJbWFnZVBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbmRlbGV0ZUNhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuXHJcbi8qKioqKioqKioqKioqKioqKioqKioqKipcclxuICogT1BFTiBCVVRUT04gSEFORExFUlMgKlxyXG4gKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuY29uc3QgZWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLmVkaXRCdXR0b24pO1xyXG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIGNvbnN0IHsgbmFtZSwgam9iIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gIGVsZW1lbnRzLnByb2ZpbGVOYW1lUG9wdXBFbGVtZW50LnZhbHVlID0gbmFtZTtcclxuICBlbGVtZW50cy5wcm9maWxlSm9iUG9wdXBFbGVtZW50LnZhbHVlID0gam9iO1xyXG4gIHVzZXJJbmZvUG9wdXAub3BlbigpO1xyXG59KVxyXG5cclxuY29uc3QgYWRkTW9kYWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5hZGRCdXR0b24pO1xyXG5hZGRNb2RhbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBuZXdDYXJkUG9wdXAub3BlbigpO1xyXG4gIGFkZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uKCk7XHJcbn0pXHJcblxyXG5jb25zdCBwcm9maWxlSW1hZ2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wcm9maWxlSW1hZ2VCdXR0b24pO1xyXG5wcm9maWxlSW1hZ2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgY29uc3QgeyBpbWFnZSB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBlbGVtZW50cy5wcm9maWxlSW1hZ2VQb3B1cEVsZW1lbnQudmFsdWUgPSBpbWFnZTtcclxuICBlZGl0UHJvZmlsZUltYWdlUG9wdXAub3BlbigpO1xyXG4gIGVkaXRJbWFnZVByb2ZpbGVGb3JtVmFsaWRhdG9yLnRvZ2dsZUJ1dHRvbigpO1xyXG59KVxyXG5cclxuXHJcbi8vIEVMSU1JTkFSRSBMRSBDT1NUQU5USSBJTlVUSUxJXHJcblxyXG4vLyBjb25zdCBkZWxldGVDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuZGVsZXRlQ2FyZEJ1dHRvbik7XHJcbi8vIGRlbGV0ZUNhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbi8vICAgZGVsZXRlQ2FyZFBvcHVwLm9wZW4oKTtcclxuLy8gfSlcclxuXHJcblxyXG4vKioqKioqKlxyXG4gKiBBUEkgKlxyXG4gKioqKioqKi9cclxuXHJcbi8vIGFwaS5nZXRQcm9maWxlSW5mbygpLnRoZW4oKGRhdGEpID0+IHtcclxuLy8gICBjb25zdCB7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSA9IGRhdGE7XHJcbi8vICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dE1lOiBhYm91dCwgbGluazogYXZhdGFyIH0pXHJcbi8vIH0pLmNhdGNoKChlcnIpID0+IHtcclxuLy8gICBjb25zb2xlLmxvZyhlcnIpO1xyXG4vLyB9KVxyXG5cclxuYXBpLmdldFByb2ZpbGVJbmZvKCkudGhlbigoZGF0YSkgPT4ge1xyXG4gIGNvbnN0IHsgbmFtZSwgYWJvdXQsIGF2YXRhciB9ID0gZGF0YTtcclxuICB1c2VySW5mby5zZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0TWU6IGFib3V0LCBsaW5rOiBhdmF0YXIgfSlcclxufSkuY2F0Y2goKGVycikgPT4ge1xyXG4gIGNvbnNvbGUubG9nKGVycik7XHJcbn0pXHJcblxyXG5cclxuIiwiY2xhc3MgQXBpIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcclxuICAgIHRoaXMuYmFzZVVybCA9IGNvbmZpZy5iYXNlVXJsO1xyXG4gICAgdGhpcy5oZWFkZXJzID0gY29uZmlnLmhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBnZXRQcm9maWxlSW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnNcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coYERhdGEgbG9hZCBjb3JyZWN0bHksIGNvZGUgc3RhdHVzOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KVxyXG4gIH1cclxuXHJcbiAgc2F2ZVByb2ZpbGVJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgIGFib3V0OiBhYm91dFxyXG4gICAgICB9KVxyXG4gICAgfSlcclxuICAgICAgLnRoZW4ocmVzID0+IHtcclxuICAgICAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICAgICAgYENvZGUgc3RhdHVzOiAke3Jlcy5zdGF0dXN9LFxyXG5kYXRhIHNhdmVkIGNvcnJlY3RseS5gXHJcbiAgICAgICAgICApO1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgfSlcclxuICB9XHJcblxyXG4gIHNhdmVQcm9maWxlSW1hZ2UoeyBhdmF0YXIgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBhdmF0YXJcclxuICAgICAgfSlcclxuICAgIH0pXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7XHJcbiAgICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICAgIGBDb2RlIHN0YXR1czogJHtyZXMuc3RhdHVzfSxcclxuaW1hZ2Ugc2F2ZWQgY29ycmVjdGx5LmBcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICB9KVxyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQXBpO1xyXG4iXSwibmFtZXMiOlsiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJwIiwiRm9ybVZhbGlkYXRvciIsInNldHRpbmdzIiwiZm9ybUVsZW1lbnQiLCJ0aGlzIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJpbnB1dCIsImVycm9yRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJyZW1vdmUiLCJfaGFzVmFsaWRJbnB1dCIsIl9zdWJtaXRCdXR0b24iLCJkaXNhYmxlZCIsIl9pbnB1dExpc3QiLCJldmVyeSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidG9nZ2xlQnV0dG9uIiwiZXZ0IiwicHJldmVudERlZmF1bHQiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJDYXJkIiwiY2FyZFNlbGVjdG9yIiwiZGF0YSIsImhhbmRsZUNhcmRDbGljayIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfY2FyZFNlbGVjdG9yIiwiX2VsZW1lbnQiLCJfaGFuZGxlTGlrZUljb24iLCJfaGFuZGxlRGVsZXRlQ2FyZCIsInRhcmdldCIsInRvZ2dsZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsIl9nZXRUZW1wbGF0ZSIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwiU2VjdGlvbiIsInNlbGVjdG9yIiwiaXRlbXMiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjVXAiLCJiaW5kIiwia2V5IiwiY2xvc2UiLCJjb250YWlucyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhJbWFnZSIsIl9jYXJkSW1hZ2UiLCJzcmMiLCJhbHQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dHMiLCJfdmFsdWVzIiwidmFsdWUiLCJldmVudCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImltYWdlU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsIl9pbWFnZUVsZW1lbnQiLCJqb2IiLCJpbWFnZSIsImFib3V0TWUiLCJpbml0aWFsQ2FyZHMiLCJlbGVtZW50cyIsImVkaXRGb3JtRWxlbWVudCIsImFkZEZvcm1FbGVtZW50IiwiZWRpdEltYWdlUHJvZmlsZUZvcm1FbGVtZW50IiwicHJvZmlsZU5hbWVFbGVtZW50IiwicHJvZmlsZUpvYkVsZW1lbnQiLCJwcm9maWxlSW1hZ2VFbGVtZW50IiwicHJvZmlsZUltYWdlUG9wdXBFbGVtZW50IiwicHJvZmlsZU5hbWVQb3B1cEVsZW1lbnQiLCJwcm9maWxlSm9iUG9wdXBFbGVtZW50IiwidmFsaWRhdGlvblNldHRpbmdzIiwiYXBpIiwiQXBpIiwiY29uZmlnIiwiYmFzZVVybCIsImhlYWRlcnMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImNvbnNvbGUiLCJsb2ciLCJzdGF0dXMiLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsImNhdGNoIiwiZXJyIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJjYXJkU2VjdGlvbiIsImNyZWF0ZUNhcmQiLCJpbWFnZVByZXZpZXdQb3B1cCIsInVzZXJJbmZvIiwidXNlckluZm9Qb3B1cCIsInNhdmVQcm9maWxlSW5mbyIsIm5ld0NhcmRQb3B1cCIsInJhd0RhdGEiLCJ0aXRsZSIsImVkaXRQcm9maWxlSW1hZ2VQb3B1cCIsInNhdmVQcm9maWxlSW1hZ2UiLCJkZWxldGVDYXJkUG9wdXAiLCJoYW5kbGVEZWxldGVDYXJkIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwiZWRpdEltYWdlUHJvZmlsZUZvcm1WYWxpZGF0b3IiLCJjYXJkRWxlbWVudCIsImltYWdlRGF0YSIsIm9wZW4iLCJhZGRJdGVtIiwiZ2VuZXJhdGVDYXJkIiwiZW5hYmxlVmFsaWRhdGlvbiIsInJlbmRlckl0ZW1zIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJnZXRVc2VySW5mbyIsImdldFByb2ZpbGVJbmZvIiwic2V0VXNlckluZm8iXSwic291cmNlUm9vdCI6IiJ9