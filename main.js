!function(){"use strict";var e={771:function(e,t,n){e.exports=n.p+"3b5bf5d8808b2f69dc93.png"},84:function(e,t,n){e.exports=n.p+"be477f46c50757f14802.png"},617:function(e,t,n){e.exports=n.p+"06170a03ad0b87abc0cc.png"},774:function(e,t,n){e.exports=n.p+"2e68ff2310a781480a3b.png"},689:function(e,t,n){e.exports=n.p+"4c7210e42f7571d8ad5b.png"},475:function(e,t,n){e.exports=n.p+"1c7f1e69704a62f4c8d8.png"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.p="",function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}var r,o;return r=n,(o=[{key:"_showInputError",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._inputErrorClass)}},{key:"_hideInputError",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._inputErrorClass)}},{key:"toggleButton",value:function(){this._hasValidInput()?(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass)):(this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass))}},{key:"_hasValidInput",value:function(){return this._inputList.every((function(e){return!0===e.validity.valid}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_setEventListeners",value:function(){var t,n=this;this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputList=function(t){if(Array.isArray(t))return e(t)}(t=this._form.querySelectorAll(this._inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){n._checkInputValidity(e),n.toggleButton()}))}))}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){return e.preventDefault()})),this._setEventListeners()}}])&&t(r.prototype,o),n}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.data,o=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=r.name,this._link=r.link,this._handleCardClick=o,this._cardSelector=n}var t,n;return t=e,(n=[{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".card__image").addEventListener("click",(function(){return e._handleCardClick({link:e._link,name:e._name})})),this._element.querySelector(".card__like").addEventListener("click",(function(t){return e._handleLikeIcon(t)})),this._element.querySelector(".card__delete").addEventListener("click",(function(){return e._handleDeleteCard()}))}},{key:"_handleLikeIcon",value:function(e){e.target.classList.toggle("card__like_active")}},{key:"_handleDeleteCard",value:function(){this._element.remove(),this._element=null}},{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".card__image").style.backgroundImage="url(".concat(this._link,")"),this._element.querySelector(".card__title").textContent=this._name,this._element}}])&&o(t.prototype,n),e}();function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(){var e=this;this._renderedItems.forEach((function(t){return e._renderer(t)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&u(t.prototype,n),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(".".concat(t)),this._handleEscUp=this._handleEscUp.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscUp",value:function(e){"Escape"==e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){(t.target.classList.contains("popup")||t.target.classList.contains("close-button"))&&e.close()}))}},{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscUp)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscUp)}}])&&c(t.prototype,n),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=d(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function d(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}function y(e,t){return y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},y(e,t)}function m(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(r);if(o){var n=_(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return m(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._cardImage=t._popupElement.querySelector(".popup__preview-image"),t}return t=u,(n=[{key:"open",value:function(e){this._popupElement.querySelector(".popup__caption").textContent=e.name,this._cardImage.src=e.link,this._cardImage.alt="Preview of ".concat(e.name),f(_(u.prototype),"open",this).call(this)}}])&&p(t.prototype,n),u}(l);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=g(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},E.apply(this,arguments)}function g(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function k(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return k(this,e)});function u(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,n))._popupForm=t._popupElement.querySelector(".popup__form"),t._handleFormSubmit=r,t._inputs=t._popupElement.querySelectorAll(".popup__input"),t._values={},t}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputs.forEach((function(t){e._values[t.name]=t.value})),this._values}},{key:"setEventListeners",value:function(){var e=this;E(w(u.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}},{key:"close",value:function(){this._popupForm.reset(),E(w(u.prototype),"close",this).call(this)}}])&&b(t.prototype,n),u}(l);function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var O=function(){function e(t){var n=t.nameSelector,r=t.jobSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(".".concat(n)),this._jobElement=document.querySelector(".".concat(r))}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.aboutMe;this._nameElement.textContent=t,this._jobElement.textContent=n}}])&&L(t.prototype,n),e}(),j=[{name:"Palouse Falls",link:n(475)},{name:"Ghost town of Bodie",link:n(689)},{name:"Car Forest",link:n(84)},{name:"Byodo-In Temple",link:n(771)},{name:"Fort Jefferson",link:n(617)},{name:"Garden of the Gods",link:n(774)}],I={editFormElement:document.querySelector(".popup_type_edit").querySelector(".popup__form"),addFormElement:document.querySelector(".popup_type_add").querySelector(".popup__form"),profileNameElement:document.querySelector(".popup__input_field_name"),profileJobElement:document.querySelector(".popup__input_field_about-me")},q={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"submit-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},B=new a({items:j,renderer:function(e){A(e)}},".cards-grid"),P=new h("popup_type_preview"),x=new O({nameSelector:"profile__name",jobSelector:"profile__about-me"}),R=new C({popupSelector:"popup_type_edit",handleFormSubmit:function(e){x.setUserInfo(e)}}),F=new C({popupSelector:"popup_type_add",handleFormSubmit:function(e){var t={name:e.title,link:e.link};A(t)}}),T=new r(q,I.editFormElement),U=new r(q,I.addFormElement),A=function(e){var t=new i({data:e,handleCardClick:function(e){P.open(e)}},"#card-template");return B.addItem(t.generateCard()),t};T.enableValidation(),U.enableValidation(),B.renderItems(),P.setEventListeners(),R.setEventListeners(),F.setEventListeners(),document.querySelector(".edit-button").addEventListener("click",(function(){var e=x.getUserInfo(),t=e.name,n=e.job;I.profileNameElement.value=t,I.profileJobElement.value=n,R.open()})),document.querySelector(".add-button").addEventListener("click",(function(){F.open(),U.toggleButton()}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoib1pBQ0lBLEVBQTJCLEdBRy9CLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJFLElBQWpCRCxFQUNILE9BQU9BLEVBQWFFLFFBR3JCLElBQUlDLEVBQVNOLEVBQXlCRSxHQUFZLENBR2pERyxRQUFTLElBT1YsT0FIQUUsRUFBb0JMLEdBQVVJLEVBQVFBLEVBQU9ELFFBQVNKLEdBRy9DSyxFQUFPRCxRQ3JCZkosRUFBb0JPLEVBQUksRywrUkNvR3hCLEVBL0ZNQyxXQUNKLFdBQVlDLEVBQVVDLEksNEZBQWEsU0FDakNDLEtBQUtDLGVBQWlCSCxFQUFTSSxjQUMvQkYsS0FBS0csc0JBQXdCTCxFQUFTTSxxQkFDdENKLEtBQUtLLHFCQUF1QlAsRUFBU1Esb0JBQ3JDTixLQUFLTyxpQkFBbUJULEVBQVNVLGdCQUNqQ1IsS0FBS1MsWUFBY1gsRUFBU1ksV0FDNUJWLEtBQUtXLE1BQVFaLEUsb0RBT2YsU0FBZ0JhLEdBQ2QsSUFBTUMsRUFBZWIsS0FBS1csTUFBTUcsY0FBWCxXQUE2QkYsRUFBTUcsR0FBbkMsV0FFckJILEVBQU1JLFVBQVVDLElBQUlqQixLQUFLTyxrQkFDekJNLEVBQWFLLFlBQWNOLEVBQU1PLGtCQUNqQ04sRUFBYUcsVUFBVUMsSUFBSWpCLEtBQUtPLG9CLDZCQU9sQyxTQUFnQkssR0FDZCxJQUFNQyxFQUFlYixLQUFLVyxNQUFNRyxjQUFYLFdBQTZCRixFQUFNRyxHQUFuQyxXQUNyQkgsRUFBTUksVUFBVUksT0FBT3BCLEtBQUtPLGtCQUM1Qk0sRUFBYUssWUFBYyxHQUMzQkwsRUFBYUcsVUFBVUksT0FBT3BCLEtBQUtPLG9CLDBCQU1yQyxXQUNNUCxLQUFLcUIsa0JBRVByQixLQUFLc0IsY0FBY0MsVUFBVyxFQUU5QnZCLEtBQUtzQixjQUFjTixVQUFVSSxPQUFPcEIsS0FBS0ssd0JBR3pDTCxLQUFLc0IsY0FBY0MsVUFBVyxFQUU5QnZCLEtBQUtzQixjQUFjTixVQUFVQyxJQUFJakIsS0FBS0sseUIsNEJBTzFDLFdBQ0UsT0FBT0wsS0FBS3dCLFdBQVdDLE9BQU0sU0FBQ2IsR0FBRCxPQUFvQyxJQUF6QkEsRUFBTWMsU0FBU0MsVyxpQ0FPekQsU0FBb0JmLEdBQ2RBLEVBQU1jLFNBQVNDLE1BQ2pCM0IsS0FBSzRCLGdCQUFnQmhCLEdBRXJCWixLQUFLNkIsZ0JBQWdCakIsSyxnQ0FPekIsV0FBcUIsSSxFQUFBLE9BQ25CWixLQUFLc0IsY0FBZ0J0QixLQUFLVyxNQUFNRyxjQUFjZCxLQUFLRyx1QkFFbkRILEtBQUt3QixXLCtDQUFpQnhCLEtBQUtXLE1BQU1tQixpQkFBaUI5QixLQUFLQyxrQixna0JBRXZERCxLQUFLd0IsV0FBV08sU0FBUSxTQUFDbkIsR0FDdkJBLEVBQU1vQixpQkFBaUIsU0FBUyxXQUU5QixFQUFLQyxvQkFBb0JyQixHQUN6QixFQUFLc0IsdUIsOEJBUVgsV0FDRWxDLEtBQUtXLE1BQU1xQixpQkFBaUIsVUFBVSxTQUFDRyxHQUFELE9BQVNBLEVBQUlDLG9CQUNuRHBDLEtBQUtxQywwQixtQkEzRkh4QyxHLDBLQ29ETixFQXBETXlDLFdBQ0osYUFBdUNDLEdBQWMsSUFBdkNDLEVBQXVDLEVBQXZDQSxLQUFNQyxFQUFpQyxFQUFqQ0EsaUIsNEZBQWlDLFNBQ25EekMsS0FBSzBDLE1BQVFGLEVBQUtHLEtBQ2xCM0MsS0FBSzRDLE1BQVFKLEVBQUtLLEtBQ2xCN0MsS0FBSzhDLGlCQUFtQkwsRUFDeEJ6QyxLQUFLK0MsY0FBZ0JSLEUsdURBTXZCLFdBQXFCLFdBQ25CdkMsS0FBS2dELFNBQVNsQyxjQUFjLGdCQUFnQmtCLGlCQUFpQixTQUFTLGtCQUFNLEVBQUtjLGlCQUFpQixDQUFFRCxLQUFNLEVBQUtELE1BQU9ELEtBQU0sRUFBS0QsV0FDakkxQyxLQUFLZ0QsU0FBU2xDLGNBQWMsZUFBZWtCLGlCQUFpQixTQUFTLFNBQUNHLEdBQUQsT0FBUyxFQUFLYyxnQkFBZ0JkLE1BQ25HbkMsS0FBS2dELFNBQVNsQyxjQUFjLGlCQUFpQmtCLGlCQUFpQixTQUFTLGtCQUFNLEVBQUtrQix5Qiw2QkFPcEYsU0FBZ0JmLEdBQ2RBLEVBQUlnQixPQUFPbkMsVUFBVW9DLE9BQU8sdUIsK0JBTTlCLFdBQ0VwRCxLQUFLZ0QsU0FBUzVCLFNBQ2RwQixLQUFLZ0QsU0FBVyxPLDBCQU1sQixXQUNFLE9BQU9LLFNBQVN2QyxjQUFjZCxLQUFLK0MsZUFBZU8sUUFBUXhDLGNBQWMsU0FBU3lDLFdBQVUsSywwQkFNN0YsV0FLRSxPQUpBdkQsS0FBS2dELFNBQVdoRCxLQUFLd0QsZUFDckJ4RCxLQUFLcUMscUJBQ0xyQyxLQUFLZ0QsU0FBU2xDLGNBQWMsZ0JBQWdCMkMsTUFBTUMsZ0JBQWxELGNBQTJFMUQsS0FBSzRDLE1BQWhGLEtBQ0E1QyxLQUFLZ0QsU0FBU2xDLGNBQWMsZ0JBQWdCSSxZQUFjbEIsS0FBSzBDLE1BQ3hEMUMsS0FBS2dELGMsbUJBaERWVixHLDBLQ2FOLEVBbEJNcUIsV0FDSixhQUFpQ0MsR0FBVSxJQUE3QkMsRUFBNkIsRUFBN0JBLE1BQU9DLEVBQXNCLEVBQXRCQSxVLDRGQUFzQixTQUV6QzlELEtBQUsrRCxlQUFpQkYsRUFDdEI3RCxLQUFLZ0UsVUFBWUYsRUFFakI5RCxLQUFLaUUsV0FBYVosU0FBU3ZDLGNBQWM4QyxHLGdEQUczQyxXQUFjLFdBQ1o1RCxLQUFLK0QsZUFBZWhDLFNBQVEsU0FBQW1DLEdBQUksT0FBSSxFQUFLRixVQUFVRSxRLHFCQUdyRCxTQUFRQyxHQUNObkUsS0FBS2lFLFdBQVdHLFFBQVFELFEsbUJBZHRCUixHLDBLQ21DTixFQW5DTVUsV0FDSixXQUFZQyxJLDRGQUFlLFNBQ3pCdEUsS0FBS3VFLGNBQWdCbEIsU0FBU3ZDLGNBQVQsV0FBMkJ3RCxJQUNoRHRFLEtBQUt3RSxhQUFleEUsS0FBS3dFLGFBQWFDLEtBQUt6RSxNLGlEQUc3QyxTQUFhbUMsR0FFSSxVQUFYQSxFQUFJdUMsS0FDTjFFLEtBQUsyRSxVLCtCQUlULFdBQW9CLFdBRWxCM0UsS0FBS3VFLGNBQWN2QyxpQkFBaUIsU0FBUyxTQUFDRyxJQUN4Q0EsRUFBSWdCLE9BQU9uQyxVQUFVNEQsU0FBUyxVQUFZekMsRUFBSWdCLE9BQU9uQyxVQUFVNEQsU0FBUyxrQkFDMUUsRUFBS0QsYSxrQkFLWCxXQUVFM0UsS0FBS3VFLGNBQWN2RCxVQUFVQyxJQUFJLGdCQUNqQ29DLFNBQVNyQixpQkFBaUIsVUFBV2hDLEtBQUt3RSxnQixtQkFHNUMsV0FFRXhFLEtBQUt1RSxjQUFjdkQsVUFBVUksT0FBTyxnQkFDcENpQyxTQUFTd0Isb0JBQW9CLFVBQVc3RSxLQUFLd0UsbUIsbUJBL0IzQ0gsRywrdENDbUJOLEVBakJNUyxTQUFBQSxJLDBvQkFDSixXQUFZUixHQUFlLGEsNEZBQUEsVUFDekIsY0FBTUEsSUFDRFMsV0FBYSxFQUFLUixjQUFjekQsY0FBYyx5QkFGMUIsRSxpQ0FLM0IsU0FBSzBCLEdBSUh4QyxLQUFLdUUsY0FBY3pELGNBQWMsbUJBQW1CSSxZQUFjc0IsRUFBS0csS0FDdkUzQyxLQUFLK0UsV0FBV0MsSUFBTXhDLEVBQUtLLEtBQzNCN0MsS0FBSytFLFdBQVdFLElBQWhCLHFCQUFvQ3pDLEVBQUtHLE1BQ3pDLDhDLG1CQWJFbUMsQ0FBdUJULEcsK3RDQytCN0IsRUEvQk1hLFNBQUFBLEksMG9CQUNKLGNBQWlELE1BQW5DWixFQUFtQyxFQUFuQ0EsY0FBZWEsRUFBb0IsRUFBcEJBLGlCQUFvQixPLDRGQUFBLFVBQy9DLGNBQU1iLElBQ0RjLFdBQWEsRUFBS2IsY0FBY3pELGNBQWMsZ0JBQ25ELEVBQUt1RSxrQkFBb0JGLEVBQ3pCLEVBQUtHLFFBQVUsRUFBS2YsY0FBY3pDLGlCQUFpQixpQkFDbkQsRUFBS3lELFFBQVUsR0FMZ0MsRSw0Q0FRakQsV0FBa0IsV0FJaEIsT0FIQXZGLEtBQUtzRixRQUFRdkQsU0FBUSxTQUFBbkIsR0FDbkIsRUFBSzJFLFFBQVEzRSxFQUFNK0IsTUFBUS9CLEVBQU00RSxTQUU1QnhGLEtBQUt1RixVLCtCQUdkLFdBQW9CLFdBQ2xCLHNEQUNBdkYsS0FBS29GLFdBQVdwRCxpQkFBaUIsVUFBVSxTQUFDeUQsR0FDMUNBLEVBQU1yRCxpQkFDTixFQUFLaUQsa0JBQWtCLEVBQUtLLG1CQUM1QixFQUFLZixhLG1CQUlULFdBQ0UzRSxLQUFLb0YsV0FBV08sUUFDaEIsK0MsbUJBM0JFVCxDQUFzQmIsRywwS0NxQjVCLEVBdkJNdUIsV0FDSixjQUEyQyxJQUE3QkMsRUFBNkIsRUFBN0JBLGFBQWNDLEVBQWUsRUFBZkEsYSw0RkFBZSxTQUN6QzlGLEtBQUsrRixhQUFlMUMsU0FBU3ZDLGNBQVQsV0FBMkIrRSxJQUMvQzdGLEtBQUtnRyxZQUFjM0MsU0FBU3ZDLGNBQVQsV0FBMkJnRixJLGdEQUdoRCxXQUlFLE1BQU8sQ0FDTG5ELEtBQU0zQyxLQUFLK0YsYUFBYTdFLFlBQ3hCK0UsSUFBS2pHLEtBQUtnRyxZQUFZOUUsZSx5QkFJMUIsWUFBK0IsSUFBakJ5QixFQUFpQixFQUFqQkEsS0FBTXVELEVBQVcsRUFBWEEsUUFFbEJsRyxLQUFLK0YsYUFBYTdFLFlBQWN5QixFQUNoQzNDLEtBQUtnRyxZQUFZOUUsWUFBY2dGLE8sbUJBbkI3Qk4sR0NPT08sRUFBZSxDQUMxQixDQUNFeEQsS0FBTSxnQkFDTkUsSyxRQUVGLENBQ0VGLEtBQU0sc0JBQ05FLEssUUFFRixDQUNFRixLQUFNLGFBQ05FLEssT0FFRixDQUNFRixLQUFNLGtCQUNORSxLLFFBRUYsQ0FDRUYsS0FBTSxpQkFDTkUsSyxRQUVGLENBQ0VGLEtBQU0scUJBQ05FLEssU0FnQlN1RCxFQUFXLENBQ3RCQyxnQkFBaUJoRCxTQUFTdkMsY0FBYyxvQkFBb0JBLGNBQWMsZ0JBQzFFd0YsZUFBZ0JqRCxTQUFTdkMsY0FBYyxtQkFBbUJBLGNBQWMsZ0JBQ3hFeUYsbUJBQW9CbEQsU0FBU3ZDLGNBQWMsNEJBQzNDMEYsa0JBQW1CbkQsU0FBU3ZDLGNBQWMsaUNBRy9CMkYsRUFBcUIsQ0FDaEN2RyxjQUFlLGdCQUNmRSxxQkFBc0IsaUJBQ3RCRSxvQkFBcUIseUJBQ3JCRSxnQkFBaUIsMEJBQ2pCRSxXQUFZLHdCQzVDUmdHLEVBQWMsSUFBSS9DLEVBQVEsQ0FDOUJFLE1BQU9zQyxFQUNQckMsU0FBVSxTQUFDdEIsR0FDVG1FLEVBQVduRSxLRGtCSCxlQ2ROb0UsRUFBb0IsSUFBSTlCLEVEZ0JkLHNCQ2RWK0IsRUFBVyxJQUFJakIsRUFBUyxDQUM1QkMsYURnQk0sZ0JDZk5DLFlEZ0JLLHNCQ2JEZ0IsRUFBZ0IsSUFBSTVCLEVBQWMsQ0FDdENaLGNEU2Msa0JDUmRhLGlCQUFrQixTQUFDM0MsR0FDakJxRSxFQUFTRSxZQUFZdkUsTUFJbkJ3RSxFQUFlLElBQUk5QixFQUFjLENBQ3JDWixjREdXLGlCQ0ZYYSxpQkFBa0IsU0FBQzhCLEdBQ2pCLElBQU16RSxFQUFPLENBQ1hHLEtBQU1zRSxFQUFRQyxNQUNkckUsS0FBTW9FLEVBQVFwRSxNQUVoQjhELEVBQVduRSxNQUlUMkUsRUFBb0IsSUFBSXRILEVBQWM0RyxFQUFvQkwsRUFBQUEsaUJBRTFEZ0IsRUFBbUIsSUFBSXZILEVBQWM0RyxFQUFvQkwsRUFBQUEsZ0JBT3pETyxFQUFhLFNBQUNuRSxHQUNsQixJQUFNNkUsRUFBYyxJQUFJL0UsRUFBSyxDQUMzQkUsS0FBQUEsRUFBTUMsZ0JBQWlCLFNBQUM2RSxHQUN0QlYsRUFBa0JXLEtBQUtELEtEdEJiLGtCQzBCZCxPQURBWixFQUFZYyxRQUFRSCxFQUFZSSxnQkFDekJKLEdBUVRGLEVBQWtCTyxtQkFDbEJOLEVBQWlCTSxtQkFDakJoQixFQUFZaUIsY0FDWmYsRUFBa0JnQixvQkFDbEJkLEVBQWNjLG9CQUNkWixFQUFhWSxvQkFPTXZFLFNBQVN2QyxjRHhDZCxnQkN5Q0hrQixpQkFBaUIsU0FBUyxXQUNuQyxNQUFzQjZFLEVBQVNnQixjQUF2QmxGLEVBQVIsRUFBUUEsS0FBTXNELEVBQWQsRUFBY0EsSUFDZEcsRUFBQUEsbUJBQUFBLE1BQW9DekQsRUFDcEN5RCxFQUFBQSxrQkFBQUEsTUFBbUNILEVBQ25DYSxFQUFjUyxVQUdJbEUsU0FBU3ZDLGNEL0NoQixlQ2dERGtCLGlCQUFpQixTQUFTLFdBQ3BDZ0YsRUFBYU8sT0FDYkgsRUFBaUJsRixrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsIi8qKlxuICogVmFsaWRhdGlvbiBmb3IgYWxsIHRoZSBwb3B1cHMuXG4gKiBAcGFyYW0gIHt9IHNldHRpbmdzIC0gdmFsaWRhdGlvblNldHRpbmdzIG9iamVjdCBmb3IgdGhlIGlucHV0cyB2YWxpZGF0aW9uLlxuICogQHBhcmFtICB7fSBmb3JtRWxlbWVudCAtIGFkZEZvcm0gb3IgZWRpdEZvcm0gcG9wdXAuXG4gKi9cbmNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzc1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzc1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50XG4gIH1cblxuICAvKipcbiAgICogUHJpdmF0ZSBtZXRob2QgdG8gc2hvdyBhbiBlcnJvclxuICAgKiBAcGFyYW0gIHt9IGlucHV0IC0gSW5wdXQgcGFzc2VkIHRocm91Z2ggdGhlIGZvcm1zLlxuICAgKi9cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKVxuICAgIC8vIEFkZCBlcnJvciBtZXNzYWdlIGFuZCBjbGFzc1xuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKVxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKVxuICB9O1xuXG4gIC8qKlxuICAgKiBQcml2YXRlIG1ldGhvZCB0byBoaWRlIGFuIGVycm9yLlxuICAgKiBAcGFyYW0gIHt9IGlucHV0IC0gSW5wdXQgcGFzc2VkIHRocm91Z2ggdGhlIGZvcm1zLlxuICAgKi9cbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dC5pZH0tZXJyb3JgKVxuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKVxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcylcbiAgfVxuXG4gIC8qKlxuICAgKiBQdWJsaWMgbWV0aG9kIHRoYXQgdG9nZ2xlIHRoZSBzdWJtaXQgYnV0dG9uLlxuICAgKi9cbiAgdG9nZ2xlQnV0dG9uKCkge1xuICAgIGlmICh0aGlzLl9oYXNWYWxpZElucHV0KCkpIHtcbiAgICAgIC8vIE1ha2UgdGhlIGJ1dHRvbiBlbmFibGVkXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZVxuICAgICAgLy8gUmVtb3ZlIHRoZSBkaXNhYmxlZCBjbGFzcyBmb3IgdGhlIGJ1dHRvblxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcylcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gTWFrZSB0aGUgYnV0dG9uIGRpc2FibGVkXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlXG4gICAgICAvLyBBZGQgdGhlIGRpc2FibGVkIGNsYXNzIGZvciB0aGUgYnV0dG9uXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0aGUgaW5wdXRzIGFyZSB2YWxpZC5cbiAgICovXG4gIF9oYXNWYWxpZElucHV0KCkge1xuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3QuZXZlcnkoKGlucHV0KSA9PiBpbnB1dC52YWxpZGl0eS52YWxpZCA9PT0gdHJ1ZSlcbiAgfVxuXG4gIC8qKlxuICAgKiBJZiB0aGUgY29uZGl0aW9uIGlzIHRydWUsIGhpZGUgdGhlIGVycm9yLCBpZiBpdCBpcyBmYWxzZSwgc2hvdyB0aGUgZXJyb3IuXG4gICAqIEBwYXJhbSAge30gaW5wdXQgLSBJbnB1dCBwYXNzZWQgdGhyb3VnaCB0aGUgZm9ybXMuXG4gICAqL1xuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KSB7XG4gICAgaWYgKGlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dClcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXQpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB0aGUgZXZlbnQgbGlzdGVuZXJzIGZvciB0aGUgaW5wdXRzLlxuICAgKi9cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvcilcbiAgICAvLyBHcmFiIGVhY2ggb25lIG9mIHRoZSBpbnB1dHNcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBbLi4udGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXVxuICAgIC8vIFRvZ2dsZSB0aGUgYnV0dG9uIGJlZm9yZSB3ZSBzdGFydCBsaXN0ZW5pbmcgdG8gdGhlIGlucHV0IGV2ZW4sIG90aGVyd2lzZSB0aGUgYnV0dG9uIHdpbGwgYmUgYWN0aXZlIHdoZW4gd2UgbG9hZCB0aGUgcGFnZSBldmVuIGlmIHRoZSBpbnB1dCBmaWVsZHMgYXJlIGludmFsaWRcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICAvLyBDaGVjayB2YWxpZGl0eSBvZiB0aGUgaW5wdXRcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0KVxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvbigpXG4gICAgICB9KVxuICAgIH0pXG4gIH1cblxuICAvKipcbiAgICogRW5hYmxlIHRoZSB2YWxpZGF0aW9uIGZvciB0aGUgZm9ybXMuXG4gICAqL1xuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4gZXZ0LnByZXZlbnREZWZhdWx0KCkpICAvLyBQcmV2ZW50IHRoZSBkZWZhdWx0IGJlaGF2aW9yIG9mIHRoZSBmb3JtIHdoZW4gd2UgYXJlIHN1Ym1pdHRpbmcgc29tZXRoaW5nLCB0aGVuIHdlIGNhbiBsb29wIG91ciBpbnB1dCBlbGVtZW50c1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCkgIC8vIEltcGxlbWVudGF0aW9uIG9mIHRoZSBsaXN0ZW5lclxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEZvcm1WYWxpZGF0b3I7XG4iLCIvKipcbiAqIEhhbmRsZSB0aGUgY3JlYXRpb24gb2YgdGhlIGNhcmQgZWxlbWVudC5cbiAqIEBwYXJhbSAge30gZGF0YSAtIENhcmQgbmFtZSBhbmQgY2FyZCBsaW5rLlxuICogQHBhcmFtICB7fSBjYXJkU2VsZWN0b3IgLSBDYXJkIGlkIHRlbXBsYXRlLlxuICovXG5jbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoeyBkYXRhLCBoYW5kbGVDYXJkQ2xpY2sgfSwgY2FyZFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZVxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbmtcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yICAvLyBUZW1wbGF0ZSBvZiBvdXIgY2FyZFxuICB9XG5cbiAgLyoqXG4gICAqIEV2ZW50IGxpc3RlbmVycyBoYW5kbGVyLlxuICAgKi9cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soeyBsaW5rOiB0aGlzLl9saW5rLCBuYW1lOiB0aGlzLl9uYW1lIH0pKVxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2xpa2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHRoaXMuX2hhbmRsZUxpa2VJY29uKGV2dCkpXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fZGVsZXRlJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVEZWxldGVDYXJkKCkpXG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHRoZSBsaWtlIGJ1dHRvbi5cbiAgICogQHBhcmFtICB7fSBldnRcbiAgICovXG4gIF9oYW5kbGVMaWtlSWNvbihldnQpIHtcbiAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC50b2dnbGUoJ2NhcmRfX2xpa2VfYWN0aXZlJylcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgdGhlIGRlbGV0ZSBidXR0b24uXG4gICAqL1xuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpXG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGxcbiAgfVxuXG4gIC8qKlxuICAgKiBDbG9uZSB0aGUgY2FyZCB0ZW1wbGF0ZS5cbiAgICovXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpLmNvbnRlbnQucXVlcnlTZWxlY3RvcignLmNhcmQnKS5jbG9uZU5vZGUodHJ1ZSlcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgdGhlIGNhcmQgZ2VuZXJhdGlvbi5cbiAgICovXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKVxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKClcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpLnN0eWxlLmJhY2tncm91bmRJbWFnZSA9IGB1cmwoJHt0aGlzLl9saW5rfSlgXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWVcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudFxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG4iLCJjbGFzcyBTZWN0aW9uIHtcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgc2VsZWN0b3IpIHtcblxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goaXRlbSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xuIiwiY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7cG9wdXBTZWxlY3Rvcn1gKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NVcCA9IHRoaXMuX2hhbmRsZUVzY1VwLmJpbmQodGhpcyk7XG4gIH1cblxuICBfaGFuZGxlRXNjVXAoZXZ0KSB7XG4gICAgLy8gUHJldmVudCBkZWZhdWx0IGFuZCBpZiBldmVudCB3YXMgb24gRVNDIGJ1dHRvbiAtPiBjYWxsIFwiY2xvc2VcIiBtZXRob2RcbiAgICBpZiAoZXZ0LmtleSA9PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpXG4gICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8gQ3JlYXRlIGFuIGV2ZW50IGxpc3RlbmVyIGZvciBjbGljayBvbiB0aGUgQ0xPU0UgYnV0dG9uIG9yIHB1cHVwIGhhbGYtdHJhc3BhcmVudCBiYWNrZ3JvdW5kXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4ge1xuICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cCcpIHx8IGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdjbG9zZS1idXR0b24nKSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgLy8gYWRkcyBhIG5ldyBjbGFzcyBhbmQgYW4gZXZlbnQgbGlzdGVuZXIsIHRvIGxpc3RlbiB0aGUgRVNDIGJ1dHRvblxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjVXApO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgLy8gcmVtb3ZlcyBhIG5ldyBjbGFzcyB3ZSBhZGRlZCBhbmQgcmVtb3ZlcyBhbiBldmVudCBsaXN0ZW5lciBmb3IgdGhlIEVTQyBidXR0b25cbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY1VwKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cDtcbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19wcmV2aWV3LWltYWdlJyk7XG4gIH1cblxuICBvcGVuKGRhdGEpIHtcbiAgICAvLyBwdXRzICduYW1lJyBmcm9tIGFyZ3MgdG8gdGhlICcucG9wdXBfX2NhcHRpb24nIHNlbGVjdG9yXG4gICAgLy8gZmluZCBpbWFnZSBieSB0aGUgJ3BvcHVwX19pbWFnZScgc2VsZWN0b3IsIHNldCAnc3JjJyBhbmQgJ2FsdCcgZm9yIGl0XG4gICAgLy8gY2FsbCBzdXBlci5vcGVuKCksIGl0IHdpbGwgY2FsbCB0aGUgb3JnaW5hbCBtZXRob2QgZnJvbSB0aGUgb3JpZ2luYWwgUG9wdXAgY2xhc3NcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jYXB0aW9uJykudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IGRhdGEubGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gYFByZXZpZXcgb2YgJHtkYXRhLm5hbWV9YDtcbiAgICBzdXBlci5vcGVuKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICAgIHRoaXMuX2lucHV0cyA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0Jyk7XG4gICAgdGhpcy5fdmFsdWVzID0ge307XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5faW5wdXRzLmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgdGhpcy5fdmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWVcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fdmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2ZW50KSA9PiB7XG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KVxuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7bmFtZVNlbGVjdG9yfWApO1xuICAgIHRoaXMuX2pvYkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGAuJHtqb2JTZWxlY3Rvcn1gKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIC8vIFJldHVybnMgYW4gb2JqZWN0IHdpdGggaW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZXIuXG4gICAgLy8gVGhpcyBtZXRob2Qgd2lsbCBiZSBoYW5keSBmb3IgY2FzZXMgd2hlbiBpdCdzIG5lY2Vzc2FyeSB0byBkaXNwbGF5IHRoZSB1c2VyXG4gICAgLy8gZGF0YSBpbiB0aGUgb3BlbiBmb3JtLlxuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0TWUgfSkge1xuICAgIC8vIFRha2VzIG5ldyB1c2VyIGRhdGEgYW5kIGFkZHMgaXQgb24gdGhlIHBhZ2UuXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBhYm91dE1lO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xuIiwiaW1wb3J0IHBhbG91c2VGYWxscyBmcm9tIFwiLi4vaW1hZ2VzL3BhbG91c2UtZmFsbHMucG5nXCI7XG5pbXBvcnQgZ2hvc3RUb3duIGZyb20gXCIuLi9pbWFnZXMvZ2hvc3QtdG93bi1vZi1ib2RpZS5wbmdcIjtcbmltcG9ydCBjYXJGb3Jlc3QgZnJvbSBcIi4uL2ltYWdlcy9jYXItZm9yZXN0LnBuZ1wiO1xuaW1wb3J0IGJ5b2RvVGVtcGxlIGZyb20gXCIuLi9pbWFnZXMvYnlvZG8taW4tdGVtcGxlLnBuZ1wiO1xuaW1wb3J0IGZvcnRKZWZmZXJzb24gZnJvbSBcIi4uL2ltYWdlcy9mb3J0LWplZmZlcnNvbi5wbmdcIjtcbmltcG9ydCBnYXJkZXJHb2RzIGZyb20gXCIuLi9pbWFnZXMvZ2FyZGVuLW9mLXRoZS1nb2RzLnBuZ1wiO1xuXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xuICB7XG4gICAgbmFtZTogXCJQYWxvdXNlIEZhbGxzXCIsXG4gICAgbGluazogcGFsb3VzZUZhbGxzXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkdob3N0IHRvd24gb2YgQm9kaWVcIixcbiAgICBsaW5rOiBnaG9zdFRvd25cbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiQ2FyIEZvcmVzdFwiLFxuICAgIGxpbms6IGNhckZvcmVzdFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJCeW9kby1JbiBUZW1wbGVcIixcbiAgICBsaW5rOiBieW9kb1RlbXBsZVxuICB9LFxuICB7XG4gICAgbmFtZTogXCJGb3J0IEplZmZlcnNvblwiLFxuICAgIGxpbms6IGZvcnRKZWZmZXJzb25cbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiR2FyZGVuIG9mIHRoZSBHb2RzXCIsXG4gICAgbGluazogZ2FyZGVyR29kc1xuICB9XG5dO1xuXG5leHBvcnQgY29uc3Qgc2VsZWN0b3JzID0ge1xuICBjYXJkTGlzdDogJy5jYXJkcy1ncmlkJyxcbiAgY2FyZFRlbXBsYXRlOiAnI2NhcmQtdGVtcGxhdGUnLFxuICBwcmV2aWV3UG9wdXA6ICdwb3B1cF90eXBlX3ByZXZpZXcnLFxuICBwcm9maWxlUG9wdXA6ICdwb3B1cF90eXBlX2VkaXQnLFxuICBjYXJkUG9wdXA6ICdwb3B1cF90eXBlX2FkZCcsXG4gIG5hbWU6ICdwcm9maWxlX19uYW1lJyxcbiAgam9iOiAncHJvZmlsZV9fYWJvdXQtbWUnLFxuICBlZGl0QnV0dG9uOiAnLmVkaXQtYnV0dG9uJyxcbiAgYWRkQnV0dG9uOiAnLmFkZC1idXR0b24nXG59O1xuXG5leHBvcnQgY29uc3QgZWxlbWVudHMgPSB7XG4gIGVkaXRGb3JtRWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfZWRpdCcpLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpLFxuICBhZGRGb3JtRWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfYWRkJykucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyksXG4gIHByb2ZpbGVOYW1lRWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF9maWVsZF9uYW1lJyksXG4gIHByb2ZpbGVKb2JFbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X2ZpZWxkX2Fib3V0LW1lJylcbn07XG5cbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uU2V0dGluZ3MgPSB7XG4gIGlucHV0U2VsZWN0b3I6IFwiLnBvcHVwX19pbnB1dFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIucG9wdXBfX2J1dHRvblwiLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInN1Ym1pdC1idXR0b25fZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcInBvcHVwX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwicG9wdXBfX2Vycm9yX3Zpc2libGVcIlxufTtcbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuaW1wb3J0IHsgaW5pdGlhbENhcmRzLCBzZWxlY3RvcnMsIGVsZW1lbnRzLCB2YWxpZGF0aW9uU2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKipcbiAqIElOU1RBTkNFUyBDUkVBVElPTiAqXG4gKioqKioqKioqKioqKioqKioqKioqKi9cblxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbih7XG4gIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xuICAgIGNyZWF0ZUNhcmQoZGF0YSlcbiAgfVxufSwgc2VsZWN0b3JzLmNhcmRMaXN0KVxuXG5jb25zdCBpbWFnZVByZXZpZXdQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShzZWxlY3RvcnMucHJldmlld1BvcHVwKTtcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICBuYW1lU2VsZWN0b3I6IHNlbGVjdG9ycy5uYW1lLFxuICBqb2JTZWxlY3Rvcjogc2VsZWN0b3JzLmpvYlxufSlcblxuY29uc3QgdXNlckluZm9Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3Rvcjogc2VsZWN0b3JzLnByb2ZpbGVQb3B1cCxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKGRhdGEpID0+IHtcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyhkYXRhKTtcbiAgfVxufSk7XG5cbmNvbnN0IG5ld0NhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcbiAgcG9wdXBTZWxlY3Rvcjogc2VsZWN0b3JzLmNhcmRQb3B1cCxcbiAgaGFuZGxlRm9ybVN1Ym1pdDogKHJhd0RhdGEpID0+IHtcbiAgICBjb25zdCBkYXRhID0ge1xuICAgICAgbmFtZTogcmF3RGF0YS50aXRsZSxcbiAgICAgIGxpbms6IHJhd0RhdGEubGlua1xuICAgIH07XG4gICAgY3JlYXRlQ2FyZChkYXRhKTtcbiAgfVxufSk7XG5cbmNvbnN0IGVkaXRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBlbGVtZW50cy5lZGl0Rm9ybUVsZW1lbnQpO1xuXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvblNldHRpbmdzLCBlbGVtZW50cy5hZGRGb3JtRWxlbWVudCk7XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKlxuICogQ1JFQVRFIENBUkQgRlVOQ1RJT04gKlxuICoqKioqKioqKioqKioqKioqKioqKioqKi9cblxuY29uc3QgY3JlYXRlQ2FyZCA9IChkYXRhKSA9PiB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3IENhcmQoe1xuICAgIGRhdGEsIGhhbmRsZUNhcmRDbGljazogKGltYWdlRGF0YSkgPT4ge1xuICAgICAgaW1hZ2VQcmV2aWV3UG9wdXAub3BlbihpbWFnZURhdGEpO1xuICAgIH1cbiAgfSwgc2VsZWN0b3JzLmNhcmRUZW1wbGF0ZSlcbiAgY2FyZFNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudC5nZW5lcmF0ZUNhcmQoKSlcbiAgcmV0dXJuIGNhcmRFbGVtZW50XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBJTlNUQU5DRVMgSU5JWklBTElaQVRJT04gKlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmVkaXRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcbmFkZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoKTtcbmltYWdlUHJldmlld1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG51c2VySW5mb1BvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5uZXdDYXJkUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBPUEVOIEJVVFRPTiBIQU5ETEVSUyAqXG4gKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5jb25zdCBlZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuZWRpdEJ1dHRvbik7XG5lZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCB7IG5hbWUsIGpvYiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgZWxlbWVudHMucHJvZmlsZU5hbWVFbGVtZW50LnZhbHVlID0gbmFtZTtcbiAgZWxlbWVudHMucHJvZmlsZUpvYkVsZW1lbnQudmFsdWUgPSBqb2I7XG4gIHVzZXJJbmZvUG9wdXAub3BlbigpO1xufSlcblxuY29uc3QgYWRkTW9kYWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5hZGRCdXR0b24pO1xuYWRkTW9kYWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIG5ld0NhcmRQb3B1cC5vcGVuKCk7XG4gIGFkZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uKCk7XG59KVxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19tb2R1bGVfY2FjaGVfXyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImNhY2hlZE1vZHVsZSIsInVuZGVmaW5lZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJfX3dlYnBhY2tfbW9kdWxlc19fIiwicCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtIiwiaW5wdXQiLCJlcnJvckVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwicmVtb3ZlIiwiX2hhc1ZhbGlkSW5wdXQiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfaW5wdXRMaXN0IiwiZXZlcnkiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJhZGRFdmVudExpc3RlbmVyIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInRvZ2dsZUJ1dHRvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiQ2FyZCIsImNhcmRTZWxlY3RvciIsImRhdGEiLCJoYW5kbGVDYXJkQ2xpY2siLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2NhcmRTZWxlY3RvciIsIl9lbGVtZW50IiwiX2hhbmRsZUxpa2VJY29uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJ0YXJnZXQiLCJ0b2dnbGUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfZ2V0VGVtcGxhdGUiLCJzdHlsZSIsImJhY2tncm91bmRJbWFnZSIsIlNlY3Rpb24iLCJzZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtIiwiZWxlbWVudCIsInByZXBlbmQiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY1VwIiwiYmluZCIsImtleSIsImNsb3NlIiwiY29udGFpbnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiUG9wdXBXaXRoSW1hZ2UiLCJfY2FyZEltYWdlIiwic3JjIiwiYWx0IiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfcG9wdXBGb3JtIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfaW5wdXRzIiwiX3ZhbHVlcyIsInZhbHVlIiwiZXZlbnQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlVzZXJJbmZvIiwibmFtZVNlbGVjdG9yIiwiam9iU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsImpvYiIsImFib3V0TWUiLCJpbml0aWFsQ2FyZHMiLCJlbGVtZW50cyIsImVkaXRGb3JtRWxlbWVudCIsImFkZEZvcm1FbGVtZW50IiwicHJvZmlsZU5hbWVFbGVtZW50IiwicHJvZmlsZUpvYkVsZW1lbnQiLCJ2YWxpZGF0aW9uU2V0dGluZ3MiLCJjYXJkU2VjdGlvbiIsImNyZWF0ZUNhcmQiLCJpbWFnZVByZXZpZXdQb3B1cCIsInVzZXJJbmZvIiwidXNlckluZm9Qb3B1cCIsInNldFVzZXJJbmZvIiwibmV3Q2FyZFBvcHVwIiwicmF3RGF0YSIsInRpdGxlIiwiZWRpdEZvcm1WYWxpZGF0b3IiLCJhZGRGb3JtVmFsaWRhdG9yIiwiY2FyZEVsZW1lbnQiLCJpbWFnZURhdGEiLCJvcGVuIiwiYWRkSXRlbSIsImdlbmVyYXRlQ2FyZCIsImVuYWJsZVZhbGlkYXRpb24iLCJyZW5kZXJJdGVtcyIsInNldEV2ZW50TGlzdGVuZXJzIiwiZ2V0VXNlckluZm8iXSwic291cmNlUm9vdCI6IiJ9