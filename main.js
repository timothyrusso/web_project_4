!function(){"use strict";var e={771:function(e,t,n){e.exports=n.p+"3b5bf5d8808b2f69dc93.png"},84:function(e,t,n){e.exports=n.p+"be477f46c50757f14802.png"},617:function(e,t,n){e.exports=n.p+"06170a03ad0b87abc0cc.png"},774:function(e,t,n){e.exports=n.p+"2e68ff2310a781480a3b.png"},689:function(e,t,n){e.exports=n.p+"4c7210e42f7571d8ad5b.png"},475:function(e,t,n){e.exports=n.p+"1c7f1e69704a62f4c8d8.png"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.p="",function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}var r,o;return r=n,(o=[{key:"_showInputError",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._inputErrorClass)}},{key:"_hideInputError",value:function(e){var t=this._form.querySelector("#".concat(e.id,"-error"));e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._inputErrorClass)}},{key:"toggleButton",value:function(){this._hasValidInput()?(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass)):(this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass))}},{key:"_hasValidInput",value:function(){return this._inputList.every((function(e){return!0===e.validity.valid}))}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_setEventListeners",value:function(){var t,n=this;this._submitButton=this._form.querySelector(this._submitButtonSelector),this._inputList=function(t){if(Array.isArray(t))return e(t)}(t=this._form.querySelectorAll(this._inputSelector))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),this._inputList.forEach((function(e){e.addEventListener("input",(function(){n._checkInputValidity(e),n.toggleButton()}))}))}},{key:"enableValidation",value:function(){this._form.addEventListener("submit",(function(e){return e.preventDefault()})),this._setEventListeners()}}])&&t(r.prototype,o),n}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.data,o=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=r.name,this._link=r.link,this._handleCardClick=o,this._cardSelector=n}var t,n;return t=e,(n=[{key:"_setEventListeners",value:function(){var e=this;this._element.querySelector(".card__image").addEventListener("click",(function(){return e._handleCardClick({link:e._link,name:e._name})})),this._element.querySelector(".card__like").addEventListener("click",(function(t){return e._handleLikeIcon(t)})),this._element.querySelector(".card__delete").addEventListener("click",(function(){return e._handleDeleteCard()}))}},{key:"_handleLikeIcon",value:function(e){e.target.classList.toggle("card__like_active")}},{key:"_handleDeleteCard",value:function(){this._element.remove(),this._element=null}},{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".card__image").style.backgroundImage="url(".concat(this._link,")"),this._element.querySelector(".card__title").textContent=this._name,this._element}}])&&o(t.prototype,n),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var u=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=r,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return t._renderer(e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&a(t.prototype,n),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=document.querySelector(".".concat(t)),this._handleEscUp=this._handleEscUp.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscUp",value:function(e){"Escape"==e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("click",(function(t){(t.target.classList.contains("popup")||t.target.classList.contains("close-button"))&&e.close()}))}},{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscUp)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscUp)}}])&&c(t.prototype,n),e}();function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=m(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},f.apply(this,arguments)}function m(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=y(e)););return e}function d(e,t){return d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},d(e,t)}function h(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(o){var n=y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._cardImage=t._popupElement.querySelector(".popup__preview-image"),t}return t=a,(n=[{key:"open",value:function(e){this._popupElement.querySelector(".popup__caption").textContent=e.name,this._cardImage.src=e.link,this._cardImage.alt="Preview of ".concat(e.name),f(y(a.prototype),"open",this).call(this)}}])&&p(t.prototype,n),a}(l);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(){return g="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=E(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},g.apply(this,arguments)}function E(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}function S(e,t){return S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},S(e,t)}function k(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(r);if(o){var n=w(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return k(this,e)});function a(e){var t,n=e.popupSelector,r=e.handleFormSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,n))._popupForm=t._popupElement.querySelector(".popup__form"),t._handleFormSubmit=r,t._inputs=t._popupElement.querySelectorAll(".popup__input"),t._values={},t}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._inputs.forEach((function(t){e._values[t.name]=t.value})),this._values}},{key:"setEventListeners",value:function(){var e=this;g(w(a.prototype),"setEventListeners",this).call(this),this._popupForm.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues()),e.close()}))}},{key:"close",value:function(){this._popupForm.reset(),g(w(a.prototype),"close",this).call(this)}}])&&b(t.prototype,n),a}(l);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var P=function(){function e(t){var n=t.nameSelector,r=t.jobSelector,o=t.imageSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._nameElement=document.querySelector(".".concat(n)),this._jobElement=document.querySelector(".".concat(r)),this._imageElement=document.querySelector(".".concat(o))}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._nameElement.textContent,job:this._jobElement.textContent,image:this._imageElement.src}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.aboutMe,r=e.link;this._nameElement.textContent=t,this._jobElement.textContent=n,this._imageElement.src=r}}])&&j(t.prototype,n),e}(),O=(n(475),n(689),n(84),n(771),n(617),n(774),".cards-grid"),I={editFormElement:document.querySelector(".popup_type_edit").querySelector(".popup__form"),addFormElement:document.querySelector(".popup_type_add").querySelector(".popup__form"),editImageProfileFormElement:document.querySelector(".popup_type_profile-image").querySelector(".popup__form"),profileNameElement:document.querySelector(".profile__name"),profileJobElement:document.querySelector(".profile__about-me"),profileImageElement:document.querySelector(".profile__image"),profileImagePopupElement:document.querySelector(".popup__input_image_link"),profileNamePopupElement:document.querySelector(".popup__input_field_name"),profileJobPopupElement:document.querySelector(".popup__input_field_about-me")},L={inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"submit-button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"};function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var x=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t.baseUrl,this.headers=t.headers}var t,n;return t=e,(n=[{key:"getProfileInfo",value:function(){return fetch("".concat(this.baseUrl,"/users/me"),{headers:this.headers}).then((function(e){return e.ok?(console.log("Data load correctly, code status: ".concat(e.status)),e.json()):Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"saveProfileInfo",value:function(e){var t=e.name,n=e.about;return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:t,about:n})}).then((function(e){return e.ok?(console.log("Code status: ".concat(e.status,",\ndata saved correctly.")),e.json()):Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"saveProfileImage",value:function(e){var t=e.avatar;return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this.headers,body:JSON.stringify({avatar:t})}).then((function(e){return e.ok?(console.log("Code status: ".concat(e.status,",\nimage saved correctly.")),e.json()):Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"getCards",value:function(){return fetch("".concat(this.baseUrl,"/cards"),{headers:this.headers}).then((function(e){return e.ok?(console.log("Data load correctly, code status: ".concat(e.status)),e.json()):Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}},{key:"saveCards",value:function(e){var t=e.name,n=e.link;return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:this.headers,body:JSON.stringify({name:t,link:n})}).then((function(e){return e.ok?(console.log("Code status: ".concat(e.status,",\ncard saved correctly.")),e.json()):Promise.reject("Error: ".concat(e.status))})).catch((function(e){console.log(e)}))}}])&&q(t.prototype,n),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"d32f6df6-a478-44c7-98e2-39f20efb7fb4","Content-Type":"application/json"}});x.getProfileInfo().then((function(e){var t=e.name,n=e.about,r=e.avatar;U.setUserInfo({name:t,aboutMe:n,link:r})})).catch((function(e){console.log(e)})),x.getCards().then((function(e){B.renderItems(e)}));var B=new u({renderer:function(e){M(e)}},O),T=new _("popup_type_preview"),U=new P({nameSelector:"profile__name",jobSelector:"profile__about-me",imageSelector:"profile__image"}),R=new C({popupSelector:"popup_type_edit",handleFormSubmit:function(e){x.saveProfileInfo({name:e.name,about:e.aboutMe}).then((function(e){I.profileNameElement.textContent=e.name,I.profileJobElement.textContent=e.about}))}}),F=new C({popupSelector:"popup_type_add",handleFormSubmit:function(e){var t={name:e.title,link:e.link};x.saveCards({name:t.name,link:t.link}).then((function(e){M(e)}))}}),A=new C({popupSelector:"popup_type_profile-image",handleFormSubmit:function(e){x.saveProfileImage({avatar:e.link}).then((function(e){I.profileImageElement.src=e.avatar}))}}),D=new C({popupSelector:"popup_type_delete-card",handleFormSubmit:function(){handleDeleteCard()}}),V=new r(L,I.editFormElement),N=new r(L,I.addFormElement),J=new r(L,I.editImageProfileFormElement),M=function(e){var t=new i({data:e,handleCardClick:function(e){T.open(e)}},"#card-template");return B.addItem(t.generateCard()),t};V.enableValidation(),N.enableValidation(),J.enableValidation(),T.setEventListeners(),R.setEventListeners(),F.setEventListeners(),A.setEventListeners(),D.setEventListeners(),document.querySelector(".edit-button").addEventListener("click",(function(){var e=U.getUserInfo(),t=e.name,n=e.job;I.profileNamePopupElement.value=t,I.profileJobPopupElement.value=n,R.open()})),document.querySelector(".add-button").addEventListener("click",(function(){F.open(),N.toggleButton()})),document.querySelector(".profile__image-wrapper").addEventListener("click",(function(){var e=U.getUserInfo().image;I.profileImagePopupElement.value=e,A.open(),J.toggleButton()}))}()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoib1pBQ0lBLEVBQTJCLEdBRy9CLFNBQVNDLEVBQW9CQyxHQUU1QixJQUFJQyxFQUFlSCxFQUF5QkUsR0FDNUMsUUFBcUJFLElBQWpCRCxFQUNILE9BQU9BLEVBQWFFLFFBR3JCLElBQUlDLEVBQVNOLEVBQXlCRSxHQUFZLENBR2pERyxRQUFTLElBT1YsT0FIQUUsRUFBb0JMLEdBQVVJLEVBQVFBLEVBQU9ELFFBQVNKLEdBRy9DSyxFQUFPRCxRQ3JCZkosRUFBb0JPLEVBQUksRywrUkNvR3hCLEVBL0ZNQyxXQUNKLFdBQVlDLEVBQVVDLEksNEZBQWEsU0FDakNDLEtBQUtDLGVBQWlCSCxFQUFTSSxjQUMvQkYsS0FBS0csc0JBQXdCTCxFQUFTTSxxQkFDdENKLEtBQUtLLHFCQUF1QlAsRUFBU1Esb0JBQ3JDTixLQUFLTyxpQkFBbUJULEVBQVNVLGdCQUNqQ1IsS0FBS1MsWUFBY1gsRUFBU1ksV0FDNUJWLEtBQUtXLE1BQVFaLEUsb0RBT2YsU0FBZ0JhLEdBQ2QsSUFBTUMsRUFBZWIsS0FBS1csTUFBTUcsY0FBWCxXQUE2QkYsRUFBTUcsR0FBbkMsV0FFckJILEVBQU1JLFVBQVVDLElBQUlqQixLQUFLTyxrQkFDekJNLEVBQWFLLFlBQWNOLEVBQU1PLGtCQUNqQ04sRUFBYUcsVUFBVUMsSUFBSWpCLEtBQUtPLG9CLDZCQU9sQyxTQUFnQkssR0FDZCxJQUFNQyxFQUFlYixLQUFLVyxNQUFNRyxjQUFYLFdBQTZCRixFQUFNRyxHQUFuQyxXQUNyQkgsRUFBTUksVUFBVUksT0FBT3BCLEtBQUtPLGtCQUM1Qk0sRUFBYUssWUFBYyxHQUMzQkwsRUFBYUcsVUFBVUksT0FBT3BCLEtBQUtPLG9CLDBCQU1yQyxXQUNNUCxLQUFLcUIsa0JBRVByQixLQUFLc0IsY0FBY0MsVUFBVyxFQUU5QnZCLEtBQUtzQixjQUFjTixVQUFVSSxPQUFPcEIsS0FBS0ssd0JBR3pDTCxLQUFLc0IsY0FBY0MsVUFBVyxFQUU5QnZCLEtBQUtzQixjQUFjTixVQUFVQyxJQUFJakIsS0FBS0sseUIsNEJBTzFDLFdBQ0UsT0FBT0wsS0FBS3dCLFdBQVdDLE9BQU0sU0FBQ2IsR0FBRCxPQUFvQyxJQUF6QkEsRUFBTWMsU0FBU0MsVyxpQ0FPekQsU0FBb0JmLEdBQ2RBLEVBQU1jLFNBQVNDLE1BQ2pCM0IsS0FBSzRCLGdCQUFnQmhCLEdBRXJCWixLQUFLNkIsZ0JBQWdCakIsSyxnQ0FPekIsV0FBcUIsSSxFQUFBLE9BQ25CWixLQUFLc0IsY0FBZ0J0QixLQUFLVyxNQUFNRyxjQUFjZCxLQUFLRyx1QkFFbkRILEtBQUt3QixXLCtDQUFpQnhCLEtBQUtXLE1BQU1tQixpQkFBaUI5QixLQUFLQyxrQixna0JBRXZERCxLQUFLd0IsV0FBV08sU0FBUSxTQUFDbkIsR0FDdkJBLEVBQU1vQixpQkFBaUIsU0FBUyxXQUU5QixFQUFLQyxvQkFBb0JyQixHQUN6QixFQUFLc0IsdUIsOEJBUVgsV0FDRWxDLEtBQUtXLE1BQU1xQixpQkFBaUIsVUFBVSxTQUFDRyxHQUFELE9BQVNBLEVBQUlDLG9CQUNuRHBDLEtBQUtxQywwQixtQkEzRkh4QyxHLDBLQ29ETixFQXBETXlDLFdBQ0osYUFBdUNDLEdBQWMsSUFBdkNDLEVBQXVDLEVBQXZDQSxLQUFNQyxFQUFpQyxFQUFqQ0EsaUIsNEZBQWlDLFNBQ25EekMsS0FBSzBDLE1BQVFGLEVBQUtHLEtBQ2xCM0MsS0FBSzRDLE1BQVFKLEVBQUtLLEtBQ2xCN0MsS0FBSzhDLGlCQUFtQkwsRUFDeEJ6QyxLQUFLK0MsY0FBZ0JSLEUsdURBTXZCLFdBQXFCLFdBQ25CdkMsS0FBS2dELFNBQVNsQyxjQUFjLGdCQUFnQmtCLGlCQUFpQixTQUFTLGtCQUFNLEVBQUtjLGlCQUFpQixDQUFFRCxLQUFNLEVBQUtELE1BQU9ELEtBQU0sRUFBS0QsV0FDakkxQyxLQUFLZ0QsU0FBU2xDLGNBQWMsZUFBZWtCLGlCQUFpQixTQUFTLFNBQUNHLEdBQUQsT0FBUyxFQUFLYyxnQkFBZ0JkLE1BQ25HbkMsS0FBS2dELFNBQVNsQyxjQUFjLGlCQUFpQmtCLGlCQUFpQixTQUFTLGtCQUFNLEVBQUtrQix5Qiw2QkFPcEYsU0FBZ0JmLEdBQ2RBLEVBQUlnQixPQUFPbkMsVUFBVW9DLE9BQU8sdUIsK0JBTTlCLFdBQ0VwRCxLQUFLZ0QsU0FBUzVCLFNBQ2RwQixLQUFLZ0QsU0FBVyxPLDBCQU1sQixXQUNFLE9BQU9LLFNBQVN2QyxjQUFjZCxLQUFLK0MsZUFBZU8sUUFBUXhDLGNBQWMsU0FBU3lDLFdBQVUsSywwQkFNN0YsV0FLRSxPQUpBdkQsS0FBS2dELFNBQVdoRCxLQUFLd0QsZUFDckJ4RCxLQUFLcUMscUJBQ0xyQyxLQUFLZ0QsU0FBU2xDLGNBQWMsZ0JBQWdCMkMsTUFBTUMsZ0JBQWxELGNBQTJFMUQsS0FBSzRDLE1BQWhGLEtBQ0E1QyxLQUFLZ0QsU0FBU2xDLGNBQWMsZ0JBQWdCSSxZQUFjbEIsS0FBSzBDLE1BQ3hEMUMsS0FBS2dELGMsbUJBaERWVixHLDBLQ1dOLEVBaEJNcUIsV0FDSixhQUEwQkMsR0FBVSxJQUF0QkMsRUFBc0IsRUFBdEJBLFUsNEZBQXNCLFNBRWxDN0QsS0FBSzhELFVBQVlELEVBQ2pCN0QsS0FBSytELFdBQWFWLFNBQVN2QyxjQUFjOEMsRyxnREFHM0MsU0FBWUksR0FBTyxXQUNqQkEsRUFBTWpDLFNBQVEsU0FBQWtDLEdBQUksT0FBSSxFQUFLSCxVQUFVRyxRLHFCQUd2QyxTQUFRQyxHQUNObEUsS0FBSytELFdBQVdJLFFBQVFELFEsbUJBWnRCUCxHLDBLQ21DTixFQW5DTVMsV0FDSixXQUFZQyxJLDRGQUFlLFNBQ3pCckUsS0FBS3NFLGNBQWdCakIsU0FBU3ZDLGNBQVQsV0FBMkJ1RCxJQUNoRHJFLEtBQUt1RSxhQUFldkUsS0FBS3VFLGFBQWFDLEtBQUt4RSxNLGlEQUc3QyxTQUFhbUMsR0FFSSxVQUFYQSxFQUFJc0MsS0FDTnpFLEtBQUswRSxVLCtCQUlULFdBQW9CLFdBRWxCMUUsS0FBS3NFLGNBQWN0QyxpQkFBaUIsU0FBUyxTQUFDRyxJQUN4Q0EsRUFBSWdCLE9BQU9uQyxVQUFVMkQsU0FBUyxVQUFZeEMsRUFBSWdCLE9BQU9uQyxVQUFVMkQsU0FBUyxrQkFDMUUsRUFBS0QsYSxrQkFLWCxXQUVFMUUsS0FBS3NFLGNBQWN0RCxVQUFVQyxJQUFJLGdCQUNqQ29DLFNBQVNyQixpQkFBaUIsVUFBV2hDLEtBQUt1RSxnQixtQkFHNUMsV0FFRXZFLEtBQUtzRSxjQUFjdEQsVUFBVUksT0FBTyxnQkFDcENpQyxTQUFTdUIsb0JBQW9CLFVBQVc1RSxLQUFLdUUsbUIsbUJBL0IzQ0gsRywrdENDbUJOLEVBakJNUyxTQUFBQSxJLDBvQkFDSixXQUFZUixHQUFlLGEsNEZBQUEsVUFDekIsY0FBTUEsSUFDRFMsV0FBYSxFQUFLUixjQUFjeEQsY0FBYyx5QkFGMUIsRSxpQ0FLM0IsU0FBSzBCLEdBSUh4QyxLQUFLc0UsY0FBY3hELGNBQWMsbUJBQW1CSSxZQUFjc0IsRUFBS0csS0FDdkUzQyxLQUFLOEUsV0FBV0MsSUFBTXZDLEVBQUtLLEtBQzNCN0MsS0FBSzhFLFdBQVdFLElBQWhCLHFCQUFvQ3hDLEVBQUtHLE1BQ3pDLDhDLG1CQWJFa0MsQ0FBdUJULEcsK3RDQytCN0IsRUEvQk1hLFNBQUFBLEksMG9CQUNKLGNBQWlELE1BQW5DWixFQUFtQyxFQUFuQ0EsY0FBZWEsRUFBb0IsRUFBcEJBLGlCQUFvQixPLDRGQUFBLFVBQy9DLGNBQU1iLElBQ0RjLFdBQWEsRUFBS2IsY0FBY3hELGNBQWMsZ0JBQ25ELEVBQUtzRSxrQkFBb0JGLEVBQ3pCLEVBQUtHLFFBQVUsRUFBS2YsY0FBY3hDLGlCQUFpQixpQkFDbkQsRUFBS3dELFFBQVUsR0FMZ0MsRSw0Q0FRakQsV0FBa0IsV0FJaEIsT0FIQXRGLEtBQUtxRixRQUFRdEQsU0FBUSxTQUFBbkIsR0FDbkIsRUFBSzBFLFFBQVExRSxFQUFNK0IsTUFBUS9CLEVBQU0yRSxTQUU1QnZGLEtBQUtzRixVLCtCQUdkLFdBQW9CLFdBQ2xCLHNEQUNBdEYsS0FBS21GLFdBQVduRCxpQkFBaUIsVUFBVSxTQUFDd0QsR0FDMUNBLEVBQU1wRCxpQkFDTixFQUFLZ0Qsa0JBQWtCLEVBQUtLLG1CQUM1QixFQUFLZixhLG1CQUlULFdBQ0UxRSxLQUFLbUYsV0FBV08sUUFDaEIsK0MsbUJBM0JFVCxDQUFzQmIsRywwS0N3QjVCLEVBMUJNdUIsV0FDSixjQUEwRCxJQUE1Q0MsRUFBNEMsRUFBNUNBLGFBQWNDLEVBQThCLEVBQTlCQSxZQUFhQyxFQUFpQixFQUFqQkEsZSw0RkFBaUIsU0FDeEQ5RixLQUFLK0YsYUFBZTFDLFNBQVN2QyxjQUFULFdBQTJCOEUsSUFDL0M1RixLQUFLZ0csWUFBYzNDLFNBQVN2QyxjQUFULFdBQTJCK0UsSUFDOUM3RixLQUFLaUcsY0FBZ0I1QyxTQUFTdkMsY0FBVCxXQUEyQmdGLEksZ0RBR2xELFdBSUUsTUFBTyxDQUNMbkQsS0FBTTNDLEtBQUsrRixhQUFhN0UsWUFDeEJnRixJQUFLbEcsS0FBS2dHLFlBQVk5RSxZQUN0QmlGLE1BQU9uRyxLQUFLaUcsY0FBY2xCLE8seUJBSTlCLFlBQXFDLElBQXZCcEMsRUFBdUIsRUFBdkJBLEtBQU15RCxFQUFpQixFQUFqQkEsUUFBU3ZELEVBQVEsRUFBUkEsS0FFM0I3QyxLQUFLK0YsYUFBYTdFLFlBQWN5QixFQUNoQzNDLEtBQUtnRyxZQUFZOUUsWUFBY2tGLEVBQy9CcEcsS0FBS2lHLGNBQWNsQixJQUFNbEMsTyxtQkF0QnZCOEMsR0NrQ09VLEcseUNBQ0QsZUFnQkNDLEVBQVcsQ0FDdEJDLGdCQUFpQmxELFNBQVN2QyxjQUFjLG9CQUFvQkEsY0FBYyxnQkFDMUUwRixlQUFnQm5ELFNBQVN2QyxjQUFjLG1CQUFtQkEsY0FBYyxnQkFDeEUyRiw0QkFBNkJwRCxTQUFTdkMsY0FBYyw2QkFBNkJBLGNBQWMsZ0JBQy9GNEYsbUJBQW9CckQsU0FBU3ZDLGNBQWMsa0JBQzNDNkYsa0JBQW1CdEQsU0FBU3ZDLGNBQWMsc0JBQzFDOEYsb0JBQXFCdkQsU0FBU3ZDLGNBQWMsbUJBQzVDK0YseUJBQTBCeEQsU0FBU3ZDLGNBQWMsNEJBQ2pEZ0csd0JBQXlCekQsU0FBU3ZDLGNBQWMsNEJBQ2hEaUcsdUJBQXdCMUQsU0FBU3ZDLGNBQWMsaUNBR3BDa0csRUFBcUIsQ0FDaEM5RyxjQUFlLGdCQUNmRSxxQkFBc0IsaUJBQ3RCRSxvQkFBcUIseUJBQ3JCRSxnQkFBaUIsMEJBQ2pCRSxXQUFZLHdCLDBLQ3JEUHVHLEVBQU0sSUNmUEMsV0FDSixXQUFZQyxJLDRGQUFRLFNBQ2xCbkgsS0FBS29ILFFBQVVELEVBQU9DLFFBQ3RCcEgsS0FBS3FILFFBQVVGLEVBQU9FLFEsbURBR3hCLFdBQ0UsT0FBT0MsTUFBTSxHQUFELE9BQUl0SCxLQUFLb0gsUUFBVCxhQUE2QixDQUN2Q0MsUUFBU3JILEtBQUtxSCxVQUViRSxNQUFLLFNBQUFDLEdBQ0osT0FBSUEsRUFBSUMsSUFDTkMsUUFBUUMsSUFBUiw0Q0FBaURILEVBQUlJLFNBQzlDSixFQUFJSyxRQUVKQyxRQUFRQyxPQUFSLGlCQUF5QlAsRUFBSUksWUFHdkNJLE9BQU0sU0FBQ0MsR0FDTlAsUUFBUUMsSUFBSU0sUSw2QkFJbEIsWUFBaUMsSUFBZnRGLEVBQWUsRUFBZkEsS0FBTXVGLEVBQVMsRUFBVEEsTUFDdEIsT0FBT1osTUFBTSxHQUFELE9BQUl0SCxLQUFLb0gsUUFBVCxhQUE2QixDQUN2Q2UsT0FBUSxRQUNSZCxRQUFTckgsS0FBS3FILFFBQ2RlLEtBQU1DLEtBQUtDLFVBQVUsQ0FDbkIzRixLQUFNQSxFQUNOdUYsTUFBT0EsTUFHUlgsTUFBSyxTQUFBQyxHQUNKLE9BQUlBLEVBQUlDLElBQ05DLFFBQVFDLElBQVIsdUJBQ2tCSCxFQUFJSSxPQUR0Qiw2QkFJT0osRUFBSUssUUFFSkMsUUFBUUMsT0FBUixpQkFBeUJQLEVBQUlJLFlBR3ZDSSxPQUFNLFNBQUNDLEdBQ05QLFFBQVFDLElBQUlNLFEsOEJBSWxCLFlBQTZCLElBQVZNLEVBQVUsRUFBVkEsT0FDakIsT0FBT2pCLE1BQU0sR0FBRCxPQUFJdEgsS0FBS29ILFFBQVQsb0JBQW9DLENBQzlDZSxPQUFRLFFBQ1JkLFFBQVNySCxLQUFLcUgsUUFDZGUsS0FBTUMsS0FBS0MsVUFBVSxDQUNuQkMsT0FBUUEsTUFHVGhCLE1BQUssU0FBQUMsR0FDSixPQUFJQSxFQUFJQyxJQUNOQyxRQUFRQyxJQUFSLHVCQUNrQkgsRUFBSUksT0FEdEIsOEJBSU9KLEVBQUlLLFFBRUpDLFFBQVFDLE9BQVIsaUJBQXlCUCxFQUFJSSxZQUd2Q0ksT0FBTSxTQUFDQyxHQUNOUCxRQUFRQyxJQUFJTSxRLHNCQUlsQixXQUNFLE9BQU9YLE1BQU0sR0FBRCxPQUFJdEgsS0FBS29ILFFBQVQsVUFBMEIsQ0FDcENDLFFBQVNySCxLQUFLcUgsVUFFYkUsTUFBSyxTQUFBQyxHQUNKLE9BQUlBLEVBQUlDLElBQ05DLFFBQVFDLElBQVIsNENBQWlESCxFQUFJSSxTQUM5Q0osRUFBSUssUUFFSkMsUUFBUUMsT0FBUixpQkFBeUJQLEVBQUlJLFlBR3ZDSSxPQUFNLFNBQUNDLEdBQ05QLFFBQVFDLElBQUlNLFEsdUJBSWxCLFlBQTBCLElBQWR0RixFQUFjLEVBQWRBLEtBQU1FLEVBQVEsRUFBUkEsS0FDaEIsT0FBT3lFLE1BQU0sR0FBRCxPQUFJdEgsS0FBS29ILFFBQVQsVUFBMEIsQ0FDcENlLE9BQVEsT0FDUmQsUUFBU3JILEtBQUtxSCxRQUNkZSxLQUFNQyxLQUFLQyxVQUFVLENBQ25CM0YsS0FBTUEsRUFDTkUsS0FBTUEsTUFHUDBFLE1BQUssU0FBQUMsR0FDSixPQUFJQSxFQUFJQyxJQUNOQyxRQUFRQyxJQUFSLHVCQUNrQkgsRUFBSUksT0FEdEIsNkJBSU9KLEVBQUlLLFFBRUpDLFFBQVFDLE9BQVIsaUJBQXlCUCxFQUFJSSxZQUd2Q0ksT0FBTSxTQUFDQyxHQUNOUCxRQUFRQyxJQUFJTSxXLG1CQTlHZGYsR0RlTyxDRHdEYSxDQUN4QkUsUUFBUyw4Q0FDVEMsUUFBUyxDQUNQbUIsY0FBZSx1Q0FDZixlQUFnQixzQkMxRG5CdkIsRUFBSXdCLGlCQUFpQmxCLE1BQUssU0FBQy9FLEdBQzFCLElBQVFHLEVBQXdCSCxFQUF4QkcsS0FBTXVGLEVBQWtCMUYsRUFBbEIwRixNQUFPSyxFQUFXL0YsRUFBWCtGLE9BQ3JCRyxFQUFTQyxZQUFZLENBQUVoRyxLQUFBQSxFQUFNeUQsUUFBUzhCLEVBQU9yRixLQUFNMEYsT0FDbERQLE9BQU0sU0FBQ0MsR0FDUlAsUUFBUUMsSUFBSU0sTUFHZGhCLEVBQUkyQixXQUFXckIsTUFBSyxTQUFDdkQsR0FDbkI2RSxFQUFZQyxZQUFZOUUsTUFRMUIsSUFBTTZFLEVBQWMsSUFBSWxGLEVBQVEsQ0FDOUJFLFNBQVUsU0FBQ3JCLEdBQ1R1RyxFQUFXdkcsS0FFWjZELEdBRUcyQyxFQUFvQixJQUFJbkUsRURGZCxzQkNJVjZELEVBQVcsSUFBSS9DLEVBQVMsQ0FDNUJDLGFEQU0sZ0JDQ05DLFlEQUssb0JDQ0xDLGNEQU8sbUJDR0htRCxFQUFnQixJQUFJaEUsRUFBYyxDQUN0Q1osY0RWYyxrQkNXZGEsaUJBQWtCLFNBQUMxQyxHQUNqQnlFLEVBQUlpQyxnQkFBZ0IsQ0FBRXZHLEtBQU1ILEVBQUtHLEtBQU11RixNQUFPMUYsRUFBSzRELFVBQVdtQixNQUFLLFNBQUNDLEdBQ2xFbEIsRUFBQUEsbUJBQUFBLFlBQTBDa0IsRUFBSTdFLEtBQzlDMkQsRUFBQUEsa0JBQUFBLFlBQXlDa0IsRUFBSVUsWUFLN0NpQixFQUFlLElBQUlsRSxFQUFjLENBQ3JDWixjRG5CVyxpQkNvQlhhLGlCQUFrQixTQUFDa0UsR0FDakIsSUFBTTVHLEVBQU8sQ0FDWEcsS0FBTXlHLEVBQVFDLE1BQ2R4RyxLQUFNdUcsRUFBUXZHLE1BRWhCb0UsRUFBSXFDLFVBQVUsQ0FBRTNHLEtBQU1ILEVBQUtHLEtBQU1FLEtBQU1MLEVBQUtLLE9BQVEwRSxNQUFLLFNBQUNDLEdBQ3hEdUIsRUFBV3ZCLFNBS1grQixFQUF3QixJQUFJdEUsRUFBYyxDQUM5Q1osY0QvQmdCLDJCQ2dDaEJhLGlCQUFrQixTQUFDMUMsR0FDakJ5RSxFQUFJdUMsaUJBQWlCLENBQUVqQixPQUFRL0YsRUFBS0ssT0FBUTBFLE1BQUssU0FBQ0MsR0FDaERsQixFQUFBQSxvQkFBQUEsSUFBbUNrQixFQUFJZSxhQUt2Q2tCLEVBQWtCLElBQUl4RSxFQUFjLENBQ3hDWixjRHZDaUIseUJDd0NqQmEsaUJBQWtCLFdBQ2hCd0Usc0JBSUVDLEVBQW9CLElBQUk5SixFQUFjbUgsRUFBb0JWLEVBQUFBLGlCQUUxRHNELEVBQW1CLElBQUkvSixFQUFjbUgsRUFBb0JWLEVBQUFBLGdCQUV6RHVELEVBQWdDLElBQUloSyxFQUFjbUgsRUFBb0JWLEVBQUFBLDZCQU90RXlDLEVBQWEsU0FBQ3ZHLEdBQ2xCLElBQU1zSCxFQUFjLElBQUl4SCxFQUFLLENBQzNCRSxLQUFBQSxFQUFNQyxnQkFBaUIsU0FBQ3NILEdBQ3RCZixFQUFrQmdCLEtBQUtELEtEaEViLGtCQ29FZCxPQURBbEIsRUFBWW9CLFFBQVFILEVBQVlJLGdCQUN6QkosR0FRVEgsRUFBa0JRLG1CQUNsQlAsRUFBaUJPLG1CQUNqQk4sRUFBOEJNLG1CQUM5Qm5CLEVBQWtCb0Isb0JBQ2xCbkIsRUFBY21CLG9CQUNkakIsRUFBYWlCLG9CQUNiYixFQUFzQmEsb0JBQ3RCWCxFQUFnQlcsb0JBT0cvRyxTQUFTdkMsY0RqRmQsZ0JDa0ZIa0IsaUJBQWlCLFNBQVMsV0FDbkMsTUFBc0IwRyxFQUFTMkIsY0FBdkIxSCxFQUFSLEVBQVFBLEtBQU11RCxFQUFkLEVBQWNBLElBQ2RJLEVBQUFBLHdCQUFBQSxNQUF5QzNELEVBQ3pDMkQsRUFBQUEsdUJBQUFBLE1BQXdDSixFQUN4QytDLEVBQWNlLFVBR0kzRyxTQUFTdkMsY0R4RmhCLGVDeUZEa0IsaUJBQWlCLFNBQVMsV0FDcENtSCxFQUFhYSxPQUNiSixFQUFpQjFILGtCQUdRbUIsU0FBU3ZDLGNEN0ZkLDJCQzhGSGtCLGlCQUFpQixTQUFTLFdBQzNDLElBQVFtRSxFQUFVdUMsRUFBUzJCLGNBQW5CbEUsTUFDUkcsRUFBQUEseUJBQUFBLE1BQTBDSCxFQUMxQ29ELEVBQXNCUyxPQUN0QkgsRUFBOEIzSCxrQiIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIl9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7IiwiLyoqXG4gKiBWYWxpZGF0aW9uIGZvciBhbGwgdGhlIHBvcHVwcy5cbiAqIEBwYXJhbSAge30gc2V0dGluZ3MgLSB2YWxpZGF0aW9uU2V0dGluZ3Mgb2JqZWN0IGZvciB0aGUgaW5wdXRzIHZhbGlkYXRpb24uXG4gKiBAcGFyYW0gIHt9IGZvcm1FbGVtZW50IC0gYWRkRm9ybSBvciBlZGl0Rm9ybSBwb3B1cC5cbiAqL1xuY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBzZXR0aW5ncy5pbnB1dFNlbGVjdG9yXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBzZXR0aW5ncy5zdWJtaXRCdXR0b25TZWxlY3RvclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBzZXR0aW5ncy5pbmFjdGl2ZUJ1dHRvbkNsYXNzXG4gICAgdGhpcy5faW5wdXRFcnJvckNsYXNzID0gc2V0dGluZ3MuaW5wdXRFcnJvckNsYXNzXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IHNldHRpbmdzLmVycm9yQ2xhc3NcbiAgICB0aGlzLl9mb3JtID0gZm9ybUVsZW1lbnRcbiAgfVxuXG4gIC8qKlxuICAgKiBQcml2YXRlIG1ldGhvZCB0byBzaG93IGFuIGVycm9yXG4gICAqIEBwYXJhbSAge30gaW5wdXQgLSBJbnB1dCBwYXNzZWQgdGhyb3VnaCB0aGUgZm9ybXMuXG4gICAqL1xuICBfc2hvd0lucHV0RXJyb3IoaW5wdXQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApXG4gICAgLy8gQWRkIGVycm9yIG1lc3NhZ2UgYW5kIGNsYXNzXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXQudmFsaWRhdGlvbk1lc3NhZ2VcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpXG4gIH07XG5cbiAgLyoqXG4gICAqIFByaXZhdGUgbWV0aG9kIHRvIGhpZGUgYW4gZXJyb3IuXG4gICAqIEBwYXJhbSAge30gaW5wdXQgLSBJbnB1dCBwYXNzZWQgdGhyb3VnaCB0aGUgZm9ybXMuXG4gICAqL1xuICBfaGlkZUlucHV0RXJyb3IoaW5wdXQpIHtcbiAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0LmlkfS1lcnJvcmApXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKVxuICB9XG5cbiAgLyoqXG4gICAqIFB1YmxpYyBtZXRob2QgdGhhdCB0b2dnbGUgdGhlIHN1Ym1pdCBidXR0b24uXG4gICAqL1xuICB0b2dnbGVCdXR0b24oKSB7XG4gICAgaWYgKHRoaXMuX2hhc1ZhbGlkSW5wdXQoKSkge1xuICAgICAgLy8gTWFrZSB0aGUgYnV0dG9uIGVuYWJsZWRcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlXG4gICAgICAvLyBSZW1vdmUgdGhlIGRpc2FibGVkIGNsYXNzIGZvciB0aGUgYnV0dG9uXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBNYWtlIHRoZSBidXR0b24gZGlzYWJsZWRcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IHRydWVcbiAgICAgIC8vIEFkZCB0aGUgZGlzYWJsZWQgY2xhc3MgZm9yIHRoZSBidXR0b25cbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpXG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRoZSBpbnB1dHMgYXJlIHZhbGlkLlxuICAgKi9cbiAgX2hhc1ZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5ldmVyeSgoaW5wdXQpID0+IGlucHV0LnZhbGlkaXR5LnZhbGlkID09PSB0cnVlKVxuICB9XG5cbiAgLyoqXG4gICAqIElmIHRoZSBjb25kaXRpb24gaXMgdHJ1ZSwgaGlkZSB0aGUgZXJyb3IsIGlmIGl0IGlzIGZhbHNlLCBzaG93IHRoZSBlcnJvci5cbiAgICogQHBhcmFtICB7fSBpbnB1dCAtIElucHV0IHBhc3NlZCB0aHJvdWdoIHRoZSBmb3Jtcy5cbiAgICovXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpIHtcbiAgICBpZiAoaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dClcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHRoZSBldmVudCBsaXN0ZW5lcnMgZm9yIHRoZSBpbnB1dHMuXG4gICAqL1xuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKVxuICAgIC8vIEdyYWIgZWFjaCBvbmUgb2YgdGhlIGlucHV0c1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildXG4gICAgLy8gVG9nZ2xlIHRoZSBidXR0b24gYmVmb3JlIHdlIHN0YXJ0IGxpc3RlbmluZyB0byB0aGUgaW5wdXQgZXZlbiwgb3RoZXJ3aXNlIHRoZSBidXR0b24gd2lsbCBiZSBhY3RpdmUgd2hlbiB3ZSBsb2FkIHRoZSBwYWdlIGV2ZW4gaWYgdGhlIGlucHV0IGZpZWxkcyBhcmUgaW52YWxpZFxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIC8vIENoZWNrIHZhbGlkaXR5IG9mIHRoZSBpbnB1dFxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXQpXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uKClcbiAgICAgIH0pXG4gICAgfSlcbiAgfVxuXG4gIC8qKlxuICAgKiBFbmFibGUgdGhlIHZhbGlkYXRpb24gZm9yIHRoZSBmb3Jtcy5cbiAgICovXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiBldnQucHJldmVudERlZmF1bHQoKSkgIC8vIFByZXZlbnQgdGhlIGRlZmF1bHQgYmVoYXZpb3Igb2YgdGhlIGZvcm0gd2hlbiB3ZSBhcmUgc3VibWl0dGluZyBzb21ldGhpbmcsIHRoZW4gd2UgY2FuIGxvb3Agb3VyIGlucHV0IGVsZW1lbnRzXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKSAgLy8gSW1wbGVtZW50YXRpb24gb2YgdGhlIGxpc3RlbmVyXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRm9ybVZhbGlkYXRvcjtcbiIsIi8qKlxuICogSGFuZGxlIHRoZSBjcmVhdGlvbiBvZiB0aGUgY2FyZCBlbGVtZW50LlxuICogQHBhcmFtICB7fSBkYXRhIC0gQ2FyZCBuYW1lIGFuZCBjYXJkIGxpbmsuXG4gKiBAcGFyYW0gIHt9IGNhcmRTZWxlY3RvciAtIENhcmQgaWQgdGVtcGxhdGUuXG4gKi9cbmNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIGhhbmRsZUNhcmRDbGljayB9LCBjYXJkU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGlua1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3IgIC8vIFRlbXBsYXRlIG9mIG91ciBjYXJkXG4gIH1cblxuICAvKipcbiAgICogRXZlbnQgbGlzdGVuZXJzIGhhbmRsZXIuXG4gICAqL1xuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZUNhcmRDbGljayh7IGxpbms6IHRoaXMuX2xpbmssIG5hbWU6IHRoaXMuX25hbWUgfSkpXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fbGlrZScpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2dCkgPT4gdGhpcy5faGFuZGxlTGlrZUljb24oZXZ0KSlcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19kZWxldGUnKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQoKSlcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgdGhlIGxpa2UgYnV0dG9uLlxuICAgKiBAcGFyYW0gIHt9IGV2dFxuICAgKi9cbiAgX2hhbmRsZUxpa2VJY29uKGV2dCkge1xuICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZF9fbGlrZV9hY3RpdmUnKVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB0aGUgZGVsZXRlIGJ1dHRvbi5cbiAgICovXG4gIF9oYW5kbGVEZWxldGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKClcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIENsb25lIHRoZSBjYXJkIHRlbXBsYXRlLlxuICAgKi9cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcikuY29udGVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZCcpLmNsb25lTm9kZSh0cnVlKVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSB0aGUgY2FyZCBnZW5lcmF0aW9uLlxuICAgKi9cbiAgZ2VuZXJhdGVDYXJkKCkge1xuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKVxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmNhcmRfX2ltYWdlJykuc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke3RoaXMuX2xpbmt9KWBcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX190aXRsZScpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZVxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcbiIsImNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIHNlbGVjdG9yKSB7XG5cbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoaXRlbXMpIHtcbiAgICBpdGVtcy5mb3JFYWNoKGl0ZW0gPT4gdGhpcy5fcmVuZGVyZXIoaXRlbSkpO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgU2VjdGlvbjtcbiIsImNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke3BvcHVwU2VsZWN0b3J9YCk7XG4gICAgdGhpcy5faGFuZGxlRXNjVXAgPSB0aGlzLl9oYW5kbGVFc2NVcC5iaW5kKHRoaXMpO1xuICB9XG5cbiAgX2hhbmRsZUVzY1VwKGV2dCkge1xuICAgIC8vIFByZXZlbnQgZGVmYXVsdCBhbmQgaWYgZXZlbnQgd2FzIG9uIEVTQyBidXR0b24gLT4gY2FsbCBcImNsb3NlXCIgbWV0aG9kXG4gICAgaWYgKGV2dC5rZXkgPT0gJ0VzY2FwZScpIHtcbiAgICAgIHRoaXMuY2xvc2UoKVxuICAgIH1cbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIC8vIENyZWF0ZSBhbiBldmVudCBsaXN0ZW5lciBmb3IgY2xpY2sgb24gdGhlIENMT1NFIGJ1dHRvbiBvciBwdXB1cCBoYWxmLXRyYXNwYXJlbnQgYmFja2dyb3VuZFxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChldnQpID0+IHtcbiAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXAnKSB8fCBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygnY2xvc2UtYnV0dG9uJykpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0pXG4gIH1cblxuICBvcGVuKCkge1xuICAgIC8vIGFkZHMgYSBuZXcgY2xhc3MgYW5kIGFuIGV2ZW50IGxpc3RlbmVyLCB0byBsaXN0ZW4gdGhlIEVTQyBidXR0b25cbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY1VwKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIC8vIHJlbW92ZXMgYSBuZXcgY2xhc3Mgd2UgYWRkZWQgYW5kIHJlbW92ZXMgYW4gZXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBFU0MgYnV0dG9uXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NVcCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXA7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fcHJldmlldy1pbWFnZScpO1xuICB9XG5cbiAgb3BlbihkYXRhKSB7XG4gICAgLy8gcHV0cyAnbmFtZScgZnJvbSBhcmdzIHRvIHRoZSAnLnBvcHVwX19jYXB0aW9uJyBzZWxlY3RvclxuICAgIC8vIGZpbmQgaW1hZ2UgYnkgdGhlICdwb3B1cF9faW1hZ2UnIHNlbGVjdG9yLCBzZXQgJ3NyYycgYW5kICdhbHQnIGZvciBpdFxuICAgIC8vIGNhbGwgc3VwZXIub3BlbigpLCBpdCB3aWxsIGNhbGwgdGhlIG9yZ2luYWwgbWV0aG9kIGZyb20gdGhlIG9yaWdpbmFsIFBvcHVwIGNsYXNzXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2FwdGlvbicpLnRleHRDb250ZW50ID0gZGF0YS5uYW1lO1xuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSBkYXRhLmxpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IGBQcmV2aWV3IG9mICR7ZGF0YS5uYW1lfWA7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFBvcHVwV2l0aEltYWdlO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQgfSkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICB0aGlzLl9pbnB1dHMgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dCcpO1xuICAgIHRoaXMuX3ZhbHVlcyA9IHt9O1xuICB9XG5cbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2lucHV0cy5mb3JFYWNoKGlucHV0ID0+IHtcbiAgICAgIHRoaXMuX3ZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlcztcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fcG9wdXBGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xuICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfSlcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5yZXNldCgpO1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoRm9ybTtcbiIsImNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lU2VsZWN0b3IsIGpvYlNlbGVjdG9yLCBpbWFnZVNlbGVjdG9yIH0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke25hbWVTZWxlY3Rvcn1gKTtcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7am9iU2VsZWN0b3J9YCk7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW1hZ2VTZWxlY3Rvcn1gKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIC8vIFJldHVybnMgYW4gb2JqZWN0IHdpdGggaW5mb3JtYXRpb24gYWJvdXQgdGhlIHVzZXIuXG4gICAgLy8gVGhpcyBtZXRob2Qgd2lsbCBiZSBoYW5keSBmb3IgY2FzZXMgd2hlbiBpdCdzIG5lY2Vzc2FyeSB0byBkaXNwbGF5IHRoZSB1c2VyXG4gICAgLy8gZGF0YSBpbiB0aGUgb3BlbiBmb3JtLlxuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcbiAgICAgIGltYWdlOiB0aGlzLl9pbWFnZUVsZW1lbnQuc3JjXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXRNZSwgbGluayB9KSB7XG4gICAgLy8gVGFrZXMgbmV3IHVzZXIgZGF0YSBhbmQgYWRkcyBpdCBvbiB0aGUgcGFnZS5cbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCA9IGFib3V0TWU7XG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LnNyYyA9IGxpbms7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgVXNlckluZm87XG4iLCJpbXBvcnQgcGFsb3VzZUZhbGxzIGZyb20gXCIuLi9pbWFnZXMvcGFsb3VzZS1mYWxscy5wbmdcIjtcbmltcG9ydCBnaG9zdFRvd24gZnJvbSBcIi4uL2ltYWdlcy9naG9zdC10b3duLW9mLWJvZGllLnBuZ1wiO1xuaW1wb3J0IGNhckZvcmVzdCBmcm9tIFwiLi4vaW1hZ2VzL2Nhci1mb3Jlc3QucG5nXCI7XG5pbXBvcnQgYnlvZG9UZW1wbGUgZnJvbSBcIi4uL2ltYWdlcy9ieW9kby1pbi10ZW1wbGUucG5nXCI7XG5pbXBvcnQgZm9ydEplZmZlcnNvbiBmcm9tIFwiLi4vaW1hZ2VzL2ZvcnQtamVmZmVyc29uLnBuZ1wiO1xuaW1wb3J0IGdhcmRlckdvZHMgZnJvbSBcIi4uL2ltYWdlcy9nYXJkZW4tb2YtdGhlLWdvZHMucG5nXCI7XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIlBhbG91c2UgRmFsbHNcIixcbiAgICBsaW5rOiBwYWxvdXNlRmFsbHNcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiR2hvc3QgdG93biBvZiBCb2RpZVwiLFxuICAgIGxpbms6IGdob3N0VG93blxuICB9LFxuICB7XG4gICAgbmFtZTogXCJDYXIgRm9yZXN0XCIsXG4gICAgbGluazogY2FyRm9yZXN0XG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJ5b2RvLUluIFRlbXBsZVwiLFxuICAgIGxpbms6IGJ5b2RvVGVtcGxlXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkZvcnQgSmVmZmVyc29uXCIsXG4gICAgbGluazogZm9ydEplZmZlcnNvblxuICB9LFxuICB7XG4gICAgbmFtZTogXCJHYXJkZW4gb2YgdGhlIEdvZHNcIixcbiAgICBsaW5rOiBnYXJkZXJHb2RzXG4gIH1cbl07XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XG4gIGNhcmRMaXN0OiAnLmNhcmRzLWdyaWQnLFxuICBjYXJkVGVtcGxhdGU6ICcjY2FyZC10ZW1wbGF0ZScsXG4gIHByZXZpZXdQb3B1cDogJ3BvcHVwX3R5cGVfcHJldmlldycsXG4gIHByb2ZpbGVQb3B1cDogJ3BvcHVwX3R5cGVfZWRpdCcsXG4gIGNhcmRQb3B1cDogJ3BvcHVwX3R5cGVfYWRkJyxcbiAgZWRpdEltYWdlUG9wdXA6ICdwb3B1cF90eXBlX3Byb2ZpbGUtaW1hZ2UnLFxuICBkZWxldGVDYXJkUG9wdXA6ICdwb3B1cF90eXBlX2RlbGV0ZS1jYXJkJyxcbiAgbmFtZTogJ3Byb2ZpbGVfX25hbWUnLFxuICBqb2I6ICdwcm9maWxlX19hYm91dC1tZScsXG4gIGltYWdlOiAncHJvZmlsZV9faW1hZ2UnLFxuICBlZGl0QnV0dG9uOiAnLmVkaXQtYnV0dG9uJyxcbiAgYWRkQnV0dG9uOiAnLmFkZC1idXR0b24nLFxuICBwcm9maWxlSW1hZ2VCdXR0b246ICcucHJvZmlsZV9faW1hZ2Utd3JhcHBlcicsXG4gIGRlbGV0ZUNhcmRCdXR0b246ICcuY2FyZF9fZGVsZXRlJ1xufTtcblxuZXhwb3J0IGNvbnN0IGVsZW1lbnRzID0ge1xuICBlZGl0Rm9ybUVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2VkaXQnKS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKSxcbiAgYWRkRm9ybUVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX2FkZCcpLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpLFxuICBlZGl0SW1hZ2VQcm9maWxlRm9ybUVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX3Byb2ZpbGUtaW1hZ2UnKS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKSxcbiAgcHJvZmlsZU5hbWVFbGVtZW50OiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fbmFtZScpLFxuICBwcm9maWxlSm9iRWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Fib3V0LW1lJyksXG4gIHByb2ZpbGVJbWFnZUVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19pbWFnZScpLFxuICBwcm9maWxlSW1hZ2VQb3B1cEVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfaW1hZ2VfbGluaycpLFxuICBwcm9maWxlTmFtZVBvcHVwRWxlbWVudDogZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF9maWVsZF9uYW1lJyksXG4gIHByb2ZpbGVKb2JQb3B1cEVsZW1lbnQ6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfZmllbGRfYWJvdXQtbWUnKVxufTtcblxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25TZXR0aW5ncyA9IHtcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5wb3B1cF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwic3VibWl0LWJ1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJwb3B1cF9fZXJyb3JfdmlzaWJsZVwiXG59O1xuXG5leHBvcnQgY29uc3QgdXNlckNvbmZpZyA9IHtcbiAgYmFzZVVybDogJ2h0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTInLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogXCJkMzJmNmRmNi1hNDc4LTQ0YzctOThlMi0zOWYyMGVmYjdmYjRcIixcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICB9XG59XG4iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XG5pbXBvcnQgVXNlckluZm8gZnJvbSBcIi4uL2NvbXBvbmVudHMvVXNlckluZm8uanNcIjtcbmltcG9ydCB7IHNlbGVjdG9ycywgZWxlbWVudHMsIHZhbGlkYXRpb25TZXR0aW5ncywgdXNlckNvbmZpZywgaW5pdGlhbENhcmRzIH0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIlxuXG5cbi8qKioqKioqXG4gKiBBUEkgKlxuICoqKioqKiovXG5cbiBjb25zdCBhcGkgPSBuZXcgQXBpKHVzZXJDb25maWcpO1xuXG4gYXBpLmdldFByb2ZpbGVJbmZvKCkudGhlbigoZGF0YSkgPT4ge1xuICBjb25zdCB7IG5hbWUsIGFib3V0LCBhdmF0YXIgfSA9IGRhdGE7XG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXRNZTogYWJvdXQsIGxpbms6IGF2YXRhciB9KVxufSkuY2F0Y2goKGVycikgPT4ge1xuICBjb25zb2xlLmxvZyhlcnIpO1xufSlcblxuYXBpLmdldENhcmRzKCkudGhlbigoaXRlbXMpID0+IHtcbiAgY2FyZFNlY3Rpb24ucmVuZGVySXRlbXMoaXRlbXMpO1xufSlcblxuXG4vKioqKioqKioqKioqKioqKioqKioqKlxuICogSU5TVEFOQ0VTIENSRUFUSU9OICpcbiAqKioqKioqKioqKioqKioqKioqKioqL1xuXG5jb25zdCBjYXJkU2VjdGlvbiA9IG5ldyBTZWN0aW9uKHtcbiAgcmVuZGVyZXI6IChkYXRhKSA9PiB7XG4gICAgY3JlYXRlQ2FyZChkYXRhKVxuICB9XG59LCBzZWxlY3RvcnMuY2FyZExpc3QpXG5cbmNvbnN0IGltYWdlUHJldmlld1BvcHVwID0gbmV3IFBvcHVwV2l0aEltYWdlKHNlbGVjdG9ycy5wcmV2aWV3UG9wdXApO1xuXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVTZWxlY3Rvcjogc2VsZWN0b3JzLm5hbWUsXG4gIGpvYlNlbGVjdG9yOiBzZWxlY3RvcnMuam9iLFxuICBpbWFnZVNlbGVjdG9yOiBzZWxlY3RvcnMuaW1hZ2Vcbn0pXG5cbmNvbnN0IHVzZXJJbmZvUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IHNlbGVjdG9ycy5wcm9maWxlUG9wdXAsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XG4gICAgYXBpLnNhdmVQcm9maWxlSW5mbyh7IG5hbWU6IGRhdGEubmFtZSwgYWJvdXQ6IGRhdGEuYWJvdXRNZSB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGVsZW1lbnRzLnByb2ZpbGVOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHJlcy5uYW1lOyAgLy8gREEgU0lTVEVNQVJFXG4gICAgICBlbGVtZW50cy5wcm9maWxlSm9iRWxlbWVudC50ZXh0Q29udGVudCA9IHJlcy5hYm91dDsgIC8vIERBIFNJU1RFTUFSRVxuICAgIH0pXG4gIH1cbn0pO1xuXG5jb25zdCBuZXdDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IHNlbGVjdG9ycy5jYXJkUG9wdXAsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChyYXdEYXRhKSA9PiB7XG4gICAgY29uc3QgZGF0YSA9IHtcbiAgICAgIG5hbWU6IHJhd0RhdGEudGl0bGUsXG4gICAgICBsaW5rOiByYXdEYXRhLmxpbmtcbiAgICB9O1xuICAgIGFwaS5zYXZlQ2FyZHMoeyBuYW1lOiBkYXRhLm5hbWUsIGxpbms6IGRhdGEubGluayB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGNyZWF0ZUNhcmQocmVzKTtcbiAgICB9KVxuICB9XG59KTtcblxuY29uc3QgZWRpdFByb2ZpbGVJbWFnZVBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xuICBwb3B1cFNlbGVjdG9yOiBzZWxlY3RvcnMuZWRpdEltYWdlUG9wdXAsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XG4gICAgYXBpLnNhdmVQcm9maWxlSW1hZ2UoeyBhdmF0YXI6IGRhdGEubGluayB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIGVsZW1lbnRzLnByb2ZpbGVJbWFnZUVsZW1lbnQuc3JjID0gcmVzLmF2YXRhcjsgIC8vIERBIFNJU1RFTUFSRVxuICAgIH0pXG4gIH1cbn0pO1xuXG5jb25zdCBkZWxldGVDYXJkUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XG4gIHBvcHVwU2VsZWN0b3I6IHNlbGVjdG9ycy5kZWxldGVDYXJkUG9wdXAsXG4gIGhhbmRsZUZvcm1TdWJtaXQ6ICgpID0+IHtcbiAgICBoYW5kbGVEZWxldGVDYXJkKCk7XG4gIH1cbn0pO1xuXG5jb25zdCBlZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgZWxlbWVudHMuZWRpdEZvcm1FbGVtZW50KTtcblxuY29uc3QgYWRkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgZWxlbWVudHMuYWRkRm9ybUVsZW1lbnQpO1xuXG5jb25zdCBlZGl0SW1hZ2VQcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25TZXR0aW5ncywgZWxlbWVudHMuZWRpdEltYWdlUHJvZmlsZUZvcm1FbGVtZW50KTtcblxuXG4vKioqKioqKioqKioqKioqKioqKioqKioqXG4gKiBDUkVBVEUgQ0FSRCBGVU5DVElPTiAqXG4gKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG5jb25zdCBjcmVhdGVDYXJkID0gKGRhdGEpID0+IHtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBuZXcgQ2FyZCh7XG4gICAgZGF0YSwgaGFuZGxlQ2FyZENsaWNrOiAoaW1hZ2VEYXRhKSA9PiB7XG4gICAgICBpbWFnZVByZXZpZXdQb3B1cC5vcGVuKGltYWdlRGF0YSk7XG4gICAgfVxuICB9LCBzZWxlY3RvcnMuY2FyZFRlbXBsYXRlKVxuICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50LmdlbmVyYXRlQ2FyZCgpKVxuICByZXR1cm4gY2FyZEVsZW1lbnRcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqIElOU1RBTkNFUyBJTklaSUFMSVpBVElPTiAqXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cblxuZWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuYWRkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5lZGl0SW1hZ2VQcm9maWxlRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5pbWFnZVByZXZpZXdQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xudXNlckluZm9Qb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xubmV3Q2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5lZGl0UHJvZmlsZUltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbmRlbGV0ZUNhcmRQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5cbi8qKioqKioqKioqKioqKioqKioqKioqKipcbiAqIE9QRU4gQlVUVE9OIEhBTkRMRVJTICpcbiAqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbmNvbnN0IGVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5lZGl0QnV0dG9uKTtcbmVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIGNvbnN0IHsgbmFtZSwgam9iIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBlbGVtZW50cy5wcm9maWxlTmFtZVBvcHVwRWxlbWVudC52YWx1ZSA9IG5hbWU7XG4gIGVsZW1lbnRzLnByb2ZpbGVKb2JQb3B1cEVsZW1lbnQudmFsdWUgPSBqb2I7XG4gIHVzZXJJbmZvUG9wdXAub3BlbigpO1xufSlcblxuY29uc3QgYWRkTW9kYWxCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5hZGRCdXR0b24pO1xuYWRkTW9kYWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIG5ld0NhcmRQb3B1cC5vcGVuKCk7XG4gIGFkZEZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uKCk7XG59KVxuXG5jb25zdCBwcm9maWxlSW1hZ2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5wcm9maWxlSW1hZ2VCdXR0b24pO1xucHJvZmlsZUltYWdlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCB7IGltYWdlIH0gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBlbGVtZW50cy5wcm9maWxlSW1hZ2VQb3B1cEVsZW1lbnQudmFsdWUgPSBpbWFnZTtcbiAgZWRpdFByb2ZpbGVJbWFnZVBvcHVwLm9wZW4oKTtcbiAgZWRpdEltYWdlUHJvZmlsZUZvcm1WYWxpZGF0b3IudG9nZ2xlQnV0dG9uKCk7XG59KVxuXG5cbi8vIEVMSU1JTkFSRSBMRSBDT1NUQU5USSBJTlVUSUxJXG5cbi8vIGNvbnN0IGRlbGV0ZUNhcmRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5kZWxldGVDYXJkQnV0dG9uKTtcbi8vIGRlbGV0ZUNhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4vLyAgIGRlbGV0ZUNhcmRQb3B1cC5vcGVuKCk7XG4vLyB9KVxuXG5cblxuXG5cblxuXG4iLCJjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLmJhc2VVcmwgPSBjb25maWcuYmFzZVVybDtcbiAgICB0aGlzLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycztcbiAgfVxuXG4gIGdldFByb2ZpbGVJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgRGF0YSBsb2FkIGNvcnJlY3RseSwgY29kZSBzdGF0dXM6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgfSlcbiAgfVxuXG4gIHNhdmVQcm9maWxlSW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICBhYm91dDogYWJvdXRcbiAgICAgIH0pXG4gICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBDb2RlIHN0YXR1czogJHtyZXMuc3RhdHVzfSxcbmRhdGEgc2F2ZWQgY29ycmVjdGx5LmBcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KVxuICB9XG5cbiAgc2F2ZVByb2ZpbGVJbWFnZSh7IGF2YXRhciB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogYXZhdGFyXG4gICAgICB9KVxuICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXG4gICAgICAgICAgICBgQ29kZSBzdGF0dXM6ICR7cmVzLnN0YXR1c30sXG5pbWFnZSBzYXZlZCBjb3JyZWN0bHkuYFxuICAgICAgICAgICk7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gIH1cblxuICBnZXRDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuaGVhZGVyc1xuICAgIH0pXG4gICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICBpZiAocmVzLm9rKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coYERhdGEgbG9hZCBjb3JyZWN0bHksIGNvZGUgc3RhdHVzOiAke3Jlcy5zdGF0dXN9YCk7XG4gICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICAgICAgICB9XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgIH0pXG4gIH1cblxuICBzYXZlQ2FyZHMoeyBuYW1lLCBsaW5rIH0pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLmhlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgIGxpbms6IGxpbmtcbiAgICAgIH0pXG4gICAgfSlcbiAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcbiAgICAgICAgICAgIGBDb2RlIHN0YXR1czogJHtyZXMuc3RhdHVzfSxcbmNhcmQgc2F2ZWQgY29ycmVjdGx5LmBcbiAgICAgICAgICApO1xuICAgICAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICB9KVxuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwaTtcbiJdLCJuYW1lcyI6WyJfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18iLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJjYWNoZWRNb2R1bGUiLCJ1bmRlZmluZWQiLCJleHBvcnRzIiwibW9kdWxlIiwiX193ZWJwYWNrX21vZHVsZXNfXyIsInAiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtRWxlbWVudCIsInRoaXMiLCJfaW5wdXRTZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJfZm9ybSIsImlucHV0IiwiZXJyb3JFbGVtZW50IiwicXVlcnlTZWxlY3RvciIsImlkIiwiY2xhc3NMaXN0IiwiYWRkIiwidGV4dENvbnRlbnQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInJlbW92ZSIsIl9oYXNWYWxpZElucHV0IiwiX3N1Ym1pdEJ1dHRvbiIsImRpc2FibGVkIiwiX2lucHV0TGlzdCIsImV2ZXJ5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ0b2dnbGVCdXR0b24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsIkNhcmQiLCJjYXJkU2VsZWN0b3IiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2hhbmRsZUNhcmRDbGljayIsIl9jYXJkU2VsZWN0b3IiLCJfZWxlbWVudCIsIl9oYW5kbGVMaWtlSWNvbiIsIl9oYW5kbGVEZWxldGVDYXJkIiwidGFyZ2V0IiwidG9nZ2xlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2dldFRlbXBsYXRlIiwic3R5bGUiLCJiYWNrZ3JvdW5kSW1hZ2UiLCJTZWN0aW9uIiwic2VsZWN0b3IiLCJyZW5kZXJlciIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJpdGVtcyIsIml0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjVXAiLCJiaW5kIiwia2V5IiwiY2xvc2UiLCJjb250YWlucyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhJbWFnZSIsIl9jYXJkSW1hZ2UiLCJzcmMiLCJhbHQiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9wb3B1cEZvcm0iLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9pbnB1dHMiLCJfdmFsdWVzIiwidmFsdWUiLCJldmVudCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJqb2JTZWxlY3RvciIsImltYWdlU2VsZWN0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsIl9pbWFnZUVsZW1lbnQiLCJqb2IiLCJpbWFnZSIsImFib3V0TWUiLCJzZWxlY3RvcnMiLCJlbGVtZW50cyIsImVkaXRGb3JtRWxlbWVudCIsImFkZEZvcm1FbGVtZW50IiwiZWRpdEltYWdlUHJvZmlsZUZvcm1FbGVtZW50IiwicHJvZmlsZU5hbWVFbGVtZW50IiwicHJvZmlsZUpvYkVsZW1lbnQiLCJwcm9maWxlSW1hZ2VFbGVtZW50IiwicHJvZmlsZUltYWdlUG9wdXBFbGVtZW50IiwicHJvZmlsZU5hbWVQb3B1cEVsZW1lbnQiLCJwcm9maWxlSm9iUG9wdXBFbGVtZW50IiwidmFsaWRhdGlvblNldHRpbmdzIiwiYXBpIiwiQXBpIiwiY29uZmlnIiwiYmFzZVVybCIsImhlYWRlcnMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImNvbnNvbGUiLCJsb2ciLCJzdGF0dXMiLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsImNhdGNoIiwiZXJyIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJnZXRQcm9maWxlSW5mbyIsInVzZXJJbmZvIiwic2V0VXNlckluZm8iLCJnZXRDYXJkcyIsImNhcmRTZWN0aW9uIiwicmVuZGVySXRlbXMiLCJjcmVhdGVDYXJkIiwiaW1hZ2VQcmV2aWV3UG9wdXAiLCJ1c2VySW5mb1BvcHVwIiwic2F2ZVByb2ZpbGVJbmZvIiwibmV3Q2FyZFBvcHVwIiwicmF3RGF0YSIsInRpdGxlIiwic2F2ZUNhcmRzIiwiZWRpdFByb2ZpbGVJbWFnZVBvcHVwIiwic2F2ZVByb2ZpbGVJbWFnZSIsImRlbGV0ZUNhcmRQb3B1cCIsImhhbmRsZURlbGV0ZUNhcmQiLCJlZGl0Rm9ybVZhbGlkYXRvciIsImFkZEZvcm1WYWxpZGF0b3IiLCJlZGl0SW1hZ2VQcm9maWxlRm9ybVZhbGlkYXRvciIsImNhcmRFbGVtZW50IiwiaW1hZ2VEYXRhIiwib3BlbiIsImFkZEl0ZW0iLCJnZW5lcmF0ZUNhcmQiLCJlbmFibGVWYWxpZGF0aW9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJnZXRVc2VySW5mbyJdLCJzb3VyY2VSb290IjoiIn0=